{
  "version": 3,
  "sources": ["../../svelte/src/internal/server/hydration.js", "../../svelte/src/internal/server/abort-signal.js", "../../svelte/src/internal/server/errors.js", "../../svelte/src/internal/server/context.js", "../../svelte/src/internal/server/warnings.js", "../../svelte/src/internal/server/render-context.js", "../../svelte/src/internal/server/crypto.js", "../../devalue/src/utils.js", "../../devalue/src/uneval.js", "../../svelte/src/internal/server/renderer.js", "../../svelte/src/internal/server/blocks/html.js", "../../svelte/src/html-tree-validation.js", "../../svelte/src/internal/server/dev.js", "../../svelte/src/internal/server/index.js"],
  "sourcesContent": ["import { HYDRATION_END, HYDRATION_START, HYDRATION_START_ELSE } from '../../constants.js';\n\nexport const BLOCK_OPEN = `<!--${HYDRATION_START}-->`;\nexport const BLOCK_OPEN_ELSE = `<!--${HYDRATION_START_ELSE}-->`;\nexport const BLOCK_CLOSE = `<!--${HYDRATION_END}-->`;\nexport const EMPTY_COMMENT = `<!---->`;\n", "import { STALE_REACTION } from '#client/constants';\n\n/** @type {AbortController | null} */\nlet controller = null;\n\nexport function abort() {\n\tcontroller?.abort(STALE_REACTION);\n\tcontroller = null;\n}\n\nexport function getAbortSignal() {\n\treturn (controller ??= new AbortController()).signal;\n}\n", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nexport *  from '../shared/errors.js';\n\n/**\n * The node API `AsyncLocalStorage` is not available, but is required to use async server rendering.\n * @returns {never}\n */\nexport function async_local_storage_unavailable() {\n\tconst error = new Error(`async_local_storage_unavailable\\nThe node API \\`AsyncLocalStorage\\` is not available, but is required to use async server rendering.\\nhttps://svelte.dev/e/async_local_storage_unavailable`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Encountered asynchronous work while rendering synchronously.\n * @returns {never}\n */\nexport function await_invalid() {\n\tconst error = new Error(`await_invalid\\nEncountered asynchronous work while rendering synchronously.\\nhttps://svelte.dev/e/await_invalid`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * The `html` property of server render results has been deprecated. Use `body` instead.\n * @returns {never}\n */\nexport function html_deprecated() {\n\tconst error = new Error(`html_deprecated\\nThe \\`html\\` property of server render results has been deprecated. Use \\`body\\` instead.\\nhttps://svelte.dev/e/html_deprecated`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Attempted to set `hydratable` with key `%key%` twice with different values.\n * \n * %stack%\n * @param {string} key\n * @param {string} stack\n * @returns {never}\n */\nexport function hydratable_clobbering(key, stack) {\n\tconst error = new Error(`hydratable_clobbering\\nAttempted to set \\`hydratable\\` with key \\`${key}\\` twice with different values.\n\n${stack}\\nhttps://svelte.dev/e/hydratable_clobbering`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Failed to serialize `hydratable` data for key `%key%`.\n * \n * `hydratable` can serialize anything [`uneval` from `devalue`](https://npmjs.com/package/uneval) can, plus Promises.\n * \n * Cause:\n * %stack%\n * @param {string} key\n * @param {string} stack\n * @returns {never}\n */\nexport function hydratable_serialization_failed(key, stack) {\n\tconst error = new Error(`hydratable_serialization_failed\\nFailed to serialize \\`hydratable\\` data for key \\`${key}\\`.\n\n\\`hydratable\\` can serialize anything [\\`uneval\\` from \\`devalue\\`](https://npmjs.com/package/uneval) can, plus Promises.\n\nCause:\n${stack}\\nhttps://svelte.dev/e/hydratable_serialization_failed`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * `csp.nonce` was set while `csp.hash` was `true`. These options cannot be used simultaneously.\n * @returns {never}\n */\nexport function invalid_csp() {\n\tconst error = new Error(`invalid_csp\\n\\`csp.nonce\\` was set while \\`csp.hash\\` was \\`true\\`. These options cannot be used simultaneously.\\nhttps://svelte.dev/e/invalid_csp`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * `%name%(...)` is not available on the server\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_function_unavailable(name) {\n\tconst error = new Error(`lifecycle_function_unavailable\\n\\`${name}(...)\\` is not available on the server\\nhttps://svelte.dev/e/lifecycle_function_unavailable`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}\n\n/**\n * Could not resolve `render` context.\n * @returns {never}\n */\nexport function server_context_required() {\n\tconst error = new Error(`server_context_required\\nCould not resolve \\`render\\` context.\\nhttps://svelte.dev/e/server_context_required`);\n\n\terror.name = 'Svelte error';\n\n\tthrow error;\n}", "/** @import { SSRContext } from '#server' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\n\n/** @type {SSRContext | null} */\nexport var ssr_context = null;\n\n/** @param {SSRContext | null} v */\nexport function set_ssr_context(v) {\n\tssr_context = v;\n}\n\n/**\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\treturn [() => getContext(key), (context) => setContext(key, context)];\n}\n\n/**\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\n\treturn result;\n}\n\n/**\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_or_init_context_map('setContext').set(key, context);\n\treturn context;\n}\n\n/**\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_or_init_context_map('hasContext').has(key);\n}\n\n/** @returns {Map<any, any>} */\nexport function getAllContexts() {\n\treturn get_or_init_context_map('getAllContexts');\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (ssr_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (ssr_context.c ??= new Map(get_parent_context(ssr_context) || undefined));\n}\n\n/**\n * @param {Function} [fn]\n */\nexport function push(fn) {\n\tssr_context = { p: ssr_context, c: null, r: null };\n\n\tif (DEV) {\n\t\tssr_context.function = fn;\n\t\tssr_context.element = ssr_context.p?.element;\n\t}\n}\n\nexport function pop() {\n\tssr_context = /** @type {SSRContext} */ (ssr_context).p;\n}\n\n/**\n * @param {SSRContext} ssr_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(ssr_context) {\n\tlet parent = ssr_context.p;\n\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\n\treturn null;\n}\n\n/**\n * Wraps an `await` expression in such a way that the component context that was\n * active before the expression evaluated can be reapplied afterwards â€”\n * `await a + b()` becomes `(await $.save(a))() + b()`, meaning `b()` will have access\n * to the context of its component.\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar previous_context = ssr_context;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tssr_context = previous_context;\n\t\treturn value;\n\t};\n}\n", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * A `hydratable` value with key `%key%` was created, but at least part of it was not used during the render.\n * \n * The `hydratable` was initialized in:\n * %stack%\n * @param {string} key\n * @param {string} stack\n */\nexport function unresolved_hydratable(key, stack) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] unresolved_hydratable\\n%cA \\`hydratable\\` value with key \\`${key}\\` was created, but at least part of it was not used during the render.\n\nThe \\`hydratable\\` was initialized in:\n${stack}\\nhttps://svelte.dev/e/unresolved_hydratable`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/unresolved_hydratable`);\n\t}\n}", "// @ts-ignore -- we don't include node types in the production build\n/** @import { AsyncLocalStorage } from 'node:async_hooks' */\n/** @import { RenderContext } from '#server' */\n\nimport { deferred, noop } from '../shared/utils.js';\nimport * as e from './errors.js';\n\n/** @type {Promise<void> | null} */\nlet current_render = null;\n\n/** @type {RenderContext | null} */\nlet context = null;\n\n/** @returns {RenderContext} */\nexport function get_render_context() {\n\tconst store = context ?? als?.getStore();\n\n\tif (!store) {\n\t\te.server_context_required();\n\t}\n\n\treturn store;\n}\n\n/**\n * @template T\n * @param {() => Promise<T>} fn\n * @returns {Promise<T>}\n */\nexport async function with_render_context(fn) {\n\tcontext = {\n\t\thydratable: {\n\t\t\tlookup: new Map(),\n\t\t\tcomparisons: [],\n\t\t\tunresolved_promises: new Map()\n\t\t}\n\t};\n\n\tif (in_webcontainer()) {\n\t\tconst { promise, resolve } = deferred();\n\t\tconst previous_render = current_render;\n\t\tcurrent_render = promise;\n\t\tawait previous_render;\n\t\treturn fn().finally(resolve);\n\t}\n\n\ttry {\n\t\tif (als === null) {\n\t\t\te.async_local_storage_unavailable();\n\t\t}\n\t\treturn als.run(context, fn);\n\t} finally {\n\t\tcontext = null;\n\t}\n}\n\n/** @type {AsyncLocalStorage<RenderContext | null> | null} */\nlet als = null;\n/** @type {Promise<void> | null} */\nlet als_import = null;\n\n/**\n *\n * @returns {Promise<void>}\n */\nexport function init_render_context() {\n\t// It's important the right side of this assignment can run a maximum of one time\n\t// otherwise it's possible for a very, very well-timed race condition to assign to `als`\n\t// at the beginning of a render, and then another render to assign to it again, which causes\n\t// the first render's second half to use a new instance of `als` which doesn't have its\n\t// context anymore.\n\t// @ts-ignore -- we don't include node types in the production build\n\tals_import ??= import('node:async_hooks')\n\t\t.then((hooks) => {\n\t\t\tals = new hooks.AsyncLocalStorage();\n\t\t})\n\t\t.then(noop, noop);\n\treturn als_import;\n}\n\n// this has to be a function because rollup won't treeshake it if it's a constant\nfunction in_webcontainer() {\n\t// @ts-ignore -- this will fail when we run typecheck because we exclude node types\n\t// eslint-disable-next-line n/prefer-global/process\n\treturn !!globalThis.process?.versions?.webcontainer;\n}\n", "import { BROWSER } from 'esm-env';\n\nlet text_encoder;\n// TODO - remove this and use global `crypto` when we drop Node 18\nlet crypto;\n\n/** @param {string} data */\nexport async function sha256(data) {\n\ttext_encoder ??= new TextEncoder();\n\n\t// @ts-expect-error\n\tcrypto ??= globalThis.crypto?.subtle?.digest\n\t\t? globalThis.crypto\n\t\t: // @ts-ignore - we don't install node types in the prod build\n\t\t\t(await import('node:crypto')).webcrypto;\n\n\tconst hash_buffer = await crypto.subtle.digest('SHA-256', text_encoder.encode(data));\n\n\treturn base64_encode(hash_buffer);\n}\n\n/**\n * @param {Uint8Array} bytes\n * @returns {string}\n */\nexport function base64_encode(bytes) {\n\t// Using `Buffer` is faster than iterating\n\t// @ts-ignore\n\tif (!BROWSER && globalThis.Buffer) {\n\t\t// @ts-ignore\n\t\treturn globalThis.Buffer.from(bytes).toString('base64');\n\t}\n\n\tlet binary = '';\n\n\tfor (let i = 0; i < bytes.length; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\n\treturn btoa(binary);\n}\n", "/** @type {Record<string, string>} */\nexport const escaped = {\n\t'<': '\\\\u003C',\n\t'\\\\': '\\\\\\\\',\n\t'\\b': '\\\\b',\n\t'\\f': '\\\\f',\n\t'\\n': '\\\\n',\n\t'\\r': '\\\\r',\n\t'\\t': '\\\\t',\n\t'\\u2028': '\\\\u2028',\n\t'\\u2029': '\\\\u2029'\n};\n\nexport class DevalueError extends Error {\n\t/**\n\t * @param {string} message\n\t * @param {string[]} keys\n\t * @param {any} [value] - The value that failed to be serialized\n\t * @param {any} [root] - The root value being serialized\n\t */\n\tconstructor(message, keys, value, root) {\n\t\tsuper(message);\n\t\tthis.name = 'DevalueError';\n\t\tthis.path = keys.join('');\n\t\tthis.value = value;\n\t\tthis.root = root;\n\t}\n}\n\n/** @param {any} thing */\nexport function is_primitive(thing) {\n\treturn Object(thing) !== thing;\n}\n\nconst object_proto_names = /* @__PURE__ */ Object.getOwnPropertyNames(\n\tObject.prototype\n)\n\t.sort()\n\t.join('\\0');\n\n/** @param {any} thing */\nexport function is_plain_object(thing) {\n\tconst proto = Object.getPrototypeOf(thing);\n\n\treturn (\n\t\tproto === Object.prototype ||\n\t\tproto === null ||\n\t\tObject.getPrototypeOf(proto) === null ||\n\t\tObject.getOwnPropertyNames(proto).sort().join('\\0') === object_proto_names\n\t);\n}\n\n/** @param {any} thing */\nexport function get_type(thing) {\n\treturn Object.prototype.toString.call(thing).slice(8, -1);\n}\n\n/** @param {string} char */\nfunction get_escaped_char(char) {\n\tswitch (char) {\n\t\tcase '\"':\n\t\t\treturn '\\\\\"';\n\t\tcase '<':\n\t\t\treturn '\\\\u003C';\n\t\tcase '\\\\':\n\t\t\treturn '\\\\\\\\';\n\t\tcase '\\n':\n\t\t\treturn '\\\\n';\n\t\tcase '\\r':\n\t\t\treturn '\\\\r';\n\t\tcase '\\t':\n\t\t\treturn '\\\\t';\n\t\tcase '\\b':\n\t\t\treturn '\\\\b';\n\t\tcase '\\f':\n\t\t\treturn '\\\\f';\n\t\tcase '\\u2028':\n\t\t\treturn '\\\\u2028';\n\t\tcase '\\u2029':\n\t\t\treturn '\\\\u2029';\n\t\tdefault:\n\t\t\treturn char < ' '\n\t\t\t\t? `\\\\u${char.charCodeAt(0).toString(16).padStart(4, '0')}`\n\t\t\t\t: '';\n\t}\n}\n\n/** @param {string} str */\nexport function stringify_string(str) {\n\tlet result = '';\n\tlet last_pos = 0;\n\tconst len = str.length;\n\n\tfor (let i = 0; i < len; i += 1) {\n\t\tconst char = str[i];\n\t\tconst replacement = get_escaped_char(char);\n\t\tif (replacement) {\n\t\t\tresult += str.slice(last_pos, i) + replacement;\n\t\t\tlast_pos = i + 1;\n\t\t}\n\t}\n\n\treturn `\"${last_pos === 0 ? str : result + str.slice(last_pos)}\"`;\n}\n\n/** @param {Record<string | symbol, any>} object */\nexport function enumerable_symbols(object) {\n\treturn Object.getOwnPropertySymbols(object).filter(\n\t\t(symbol) => Object.getOwnPropertyDescriptor(object, symbol).enumerable\n\t);\n}\n\nconst is_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/** @param {string} key */\nexport function stringify_key(key) {\n\treturn is_identifier.test(key) ? '.' + key : '[' + JSON.stringify(key) + ']';\n}\n", "import {\n\tDevalueError,\n\tenumerable_symbols,\n\tescaped,\n\tget_type,\n\tis_plain_object,\n\tis_primitive,\n\tstringify_key,\n\tstringify_string\n} from './utils.js';\n\nconst chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$';\nconst unsafe_chars = /[<\\b\\f\\n\\r\\t\\0\\u2028\\u2029]/g;\nconst reserved =\n\t/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;\n\n/**\n * Turn a value into the JavaScript that creates an equivalent value\n * @param {any} value\n * @param {(value: any, uneval: (value: any) => string) => string | void} [replacer]\n */\nexport function uneval(value, replacer) {\n\tconst counts = new Map();\n\n\t/** @type {string[]} */\n\tconst keys = [];\n\n\tconst custom = new Map();\n\n\t/** @param {any} thing */\n\tfunction walk(thing) {\n\t\tif (!is_primitive(thing)) {\n\t\t\tif (counts.has(thing)) {\n\t\t\t\tcounts.set(thing, counts.get(thing) + 1);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcounts.set(thing, 1);\n\n\t\t\tif (replacer) {\n\t\t\t\tconst str = replacer(thing, (value) => uneval(value, replacer));\n\n\t\t\t\tif (typeof str === 'string') {\n\t\t\t\t\tcustom.set(thing, str);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof thing === 'function') {\n\t\t\t\tthrow new DevalueError(`Cannot stringify a function`, keys, thing, value);\n\t\t\t}\n\n\t\t\tconst type = get_type(thing);\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'BigInt':\n\t\t\t\tcase 'String':\n\t\t\t\tcase 'Boolean':\n\t\t\t\tcase 'Date':\n\t\t\t\tcase 'RegExp':\n\t\t\t\tcase 'URL':\n\t\t\t\tcase 'URLSearchParams':\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\t/** @type {any[]} */ (thing).forEach((value, i) => {\n\t\t\t\t\t\tkeys.push(`[${i}]`);\n\t\t\t\t\t\twalk(value);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Set':\n\t\t\t\t\tArray.from(thing).forEach(walk);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Map':\n\t\t\t\t\tfor (const [key, value] of thing) {\n\t\t\t\t\t\tkeys.push(\n\t\t\t\t\t\t\t`.get(${is_primitive(key) ? stringify_primitive(key) : '...'})`\n\t\t\t\t\t\t);\n\t\t\t\t\t\twalk(value);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Int8Array':\n\t\t\t\tcase 'Uint8Array':\n\t\t\t\tcase 'Uint8ClampedArray':\n\t\t\t\tcase 'Int16Array':\n\t\t\t\tcase 'Uint16Array':\n\t\t\t\tcase 'Int32Array':\n\t\t\t\tcase 'Uint32Array':\n\t\t\t\tcase 'Float32Array':\n\t\t\t\tcase 'Float64Array':\n\t\t\t\tcase 'BigInt64Array':\n\t\t\t\tcase 'BigUint64Array':\n\t\t\t\t\twalk(thing.buffer);\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'ArrayBuffer':\n\t\t\t\t\treturn;\n\n\t\t\t\tcase 'Temporal.Duration':\n\t\t\t\tcase 'Temporal.Instant':\n\t\t\t\tcase 'Temporal.PlainDate':\n\t\t\t\tcase 'Temporal.PlainTime':\n\t\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\t\tcase 'Temporal.ZonedDateTime':\n\t\t\t\t\treturn;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!is_plain_object(thing)) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify arbitrary non-POJOs`,\n\t\t\t\t\t\t\tkeys,\n\t\t\t\t\t\t\tthing,\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (enumerable_symbols(thing).length > 0) {\n\t\t\t\t\t\tthrow new DevalueError(\n\t\t\t\t\t\t\t`Cannot stringify POJOs with symbolic keys`,\n\t\t\t\t\t\t\tkeys,\n\t\t\t\t\t\t\tthing,\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const key in thing) {\n\t\t\t\t\t\tkeys.push(stringify_key(key));\n\t\t\t\t\t\twalk(thing[key]);\n\t\t\t\t\t\tkeys.pop();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\twalk(value);\n\n\tconst names = new Map();\n\n\tArray.from(counts)\n\t\t.filter((entry) => entry[1] > 1)\n\t\t.sort((a, b) => b[1] - a[1])\n\t\t.forEach((entry, i) => {\n\t\t\tnames.set(entry[0], get_name(i));\n\t\t});\n\n\t/**\n\t * @param {any} thing\n\t * @returns {string}\n\t */\n\tfunction stringify(thing) {\n\t\tif (names.has(thing)) {\n\t\t\treturn names.get(thing);\n\t\t}\n\n\t\tif (is_primitive(thing)) {\n\t\t\treturn stringify_primitive(thing);\n\t\t}\n\n\t\tif (custom.has(thing)) {\n\t\t\treturn custom.get(thing);\n\t\t}\n\n\t\tconst type = get_type(thing);\n\n\t\tswitch (type) {\n\t\t\tcase 'Number':\n\t\t\tcase 'String':\n\t\t\tcase 'Boolean':\n\t\t\t\treturn `Object(${stringify(thing.valueOf())})`;\n\n\t\t\tcase 'RegExp':\n\t\t\t\treturn `new RegExp(${stringify_string(thing.source)}, \"${\n\t\t\t\t\tthing.flags\n\t\t\t\t}\")`;\n\n\t\t\tcase 'Date':\n\t\t\t\treturn `new Date(${thing.getTime()})`;\n\n\t\t\tcase 'URL':\n\t\t\t\treturn `new URL(${stringify_string(thing.toString())})`;\n\n\t\t\tcase 'URLSearchParams':\n\t\t\t\treturn `new URLSearchParams(${stringify_string(thing.toString())})`;\n\n\t\t\tcase 'Array':\n\t\t\t\tconst members = /** @type {any[]} */ (thing).map((v, i) =>\n\t\t\t\t\ti in thing ? stringify(v) : ''\n\t\t\t\t);\n\t\t\t\tconst tail = thing.length === 0 || thing.length - 1 in thing ? '' : ',';\n\t\t\t\treturn `[${members.join(',')}${tail}]`;\n\n\t\t\tcase 'Set':\n\t\t\tcase 'Map':\n\t\t\t\treturn `new ${type}([${Array.from(thing).map(stringify).join(',')}])`;\n\n\t\t\tcase 'Int8Array':\n\t\t\tcase 'Uint8Array':\n\t\t\tcase 'Uint8ClampedArray':\n\t\t\tcase 'Int16Array':\n\t\t\tcase 'Uint16Array':\n\t\t\tcase 'Int32Array':\n\t\t\tcase 'Uint32Array':\n\t\t\tcase 'Float32Array':\n\t\t\tcase 'Float64Array':\n\t\t\tcase 'BigInt64Array':\n\t\t\tcase 'BigUint64Array': {\n\t\t\t\tlet str = `new ${type}`;\n\n\t\t\t\tif (counts.get(thing.buffer) === 1) {\n\t\t\t\t\tconst array = new thing.constructor(thing.buffer);\n\t\t\t\t\tstr += `([${array}])`;\n\t\t\t\t} else {\n\t\t\t\t\tstr += `([${stringify(thing.buffer)}])`;\n\t\t\t\t}\n\n\t\t\t\tconst a = thing.byteOffset;\n\t\t\t\tconst b = a + thing.byteLength;\n\n\t\t\t\t// handle subarrays\n\t\t\t\tif (a > 0 || b !== thing.buffer.byteLength) {\n\t\t\t\t\tconst m = +/(\\d+)/.exec(type)[1] / 8;\n\t\t\t\t\tstr += `.subarray(${a / m},${b / m})`;\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tcase 'ArrayBuffer': {\n\t\t\t\tconst ui8 = new Uint8Array(thing);\n\t\t\t\treturn `new Uint8Array([${ui8.toString()}]).buffer`;\n\t\t\t}\n\n\t\t\tcase 'Temporal.Duration':\n\t\t\tcase 'Temporal.Instant':\n\t\t\tcase 'Temporal.PlainDate':\n\t\t\tcase 'Temporal.PlainTime':\n\t\t\tcase 'Temporal.PlainDateTime':\n\t\t\tcase 'Temporal.PlainMonthDay':\n\t\t\tcase 'Temporal.PlainYearMonth':\n\t\t\tcase 'Temporal.ZonedDateTime':\n\t\t\t\treturn `${type}.from(${stringify_string(thing.toString())})`;\n\n\t\t\tdefault:\n\t\t\t\tconst keys = Object.keys(thing);\n\t\t\t\tconst obj = keys\n\t\t\t\t\t.map((key) => `${safe_key(key)}:${stringify(thing[key])}`)\n\t\t\t\t\t.join(',');\n\t\t\t\tconst proto = Object.getPrototypeOf(thing);\n\t\t\t\tif (proto === null) {\n\t\t\t\t\treturn keys.length > 0\n\t\t\t\t\t\t? `{${obj},__proto__:null}`\n\t\t\t\t\t\t: `{__proto__:null}`;\n\t\t\t\t}\n\n\t\t\t\treturn `{${obj}}`;\n\t\t}\n\t}\n\n\tconst str = stringify(value);\n\n\tif (names.size) {\n\t\t/** @type {string[]} */\n\t\tconst params = [];\n\n\t\t/** @type {string[]} */\n\t\tconst statements = [];\n\n\t\t/** @type {string[]} */\n\t\tconst values = [];\n\n\t\tnames.forEach((name, thing) => {\n\t\t\tparams.push(name);\n\n\t\t\tif (custom.has(thing)) {\n\t\t\t\tvalues.push(/** @type {string} */ (custom.get(thing)));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (is_primitive(thing)) {\n\t\t\t\tvalues.push(stringify_primitive(thing));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst type = get_type(thing);\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'String':\n\t\t\t\tcase 'Boolean':\n\t\t\t\t\tvalues.push(`Object(${stringify(thing.valueOf())})`);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RegExp':\n\t\t\t\t\tvalues.push(thing.toString());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Date':\n\t\t\t\t\tvalues.push(`new Date(${thing.getTime()})`);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tvalues.push(`Array(${thing.length})`);\n\t\t\t\t\t/** @type {any[]} */ (thing).forEach((v, i) => {\n\t\t\t\t\t\tstatements.push(`${name}[${i}]=${stringify(v)}`);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Set':\n\t\t\t\t\tvalues.push(`new Set`);\n\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t`${name}.${Array.from(thing)\n\t\t\t\t\t\t\t.map((v) => `add(${stringify(v)})`)\n\t\t\t\t\t\t\t.join('.')}`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Map':\n\t\t\t\t\tvalues.push(`new Map`);\n\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t`${name}.${Array.from(thing)\n\t\t\t\t\t\t\t.map(([k, v]) => `set(${stringify(k)}, ${stringify(v)})`)\n\t\t\t\t\t\t\t.join('.')}`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ArrayBuffer':\n\t\t\t\t\tvalues.push(\n\t\t\t\t\t\t`new Uint8Array([${new Uint8Array(thing).join(',')}]).buffer`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tvalues.push(\n\t\t\t\t\t\tObject.getPrototypeOf(thing) === null ? 'Object.create(null)' : '{}'\n\t\t\t\t\t);\n\t\t\t\t\tObject.keys(thing).forEach((key) => {\n\t\t\t\t\t\tstatements.push(\n\t\t\t\t\t\t\t`${name}${safe_prop(key)}=${stringify(thing[key])}`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tstatements.push(`return ${str}`);\n\n\t\treturn `(function(${params.join(',')}){${statements.join(\n\t\t\t';'\n\t\t)}}(${values.join(',')}))`;\n\t} else {\n\t\treturn str;\n\t}\n}\n\n/** @param {number} num */\nfunction get_name(num) {\n\tlet name = '';\n\n\tdo {\n\t\tname = chars[num % chars.length] + name;\n\t\tnum = ~~(num / chars.length) - 1;\n\t} while (num >= 0);\n\n\treturn reserved.test(name) ? `${name}0` : name;\n}\n\n/** @param {string} c */\nfunction escape_unsafe_char(c) {\n\treturn escaped[c] || c;\n}\n\n/** @param {string} str */\nfunction escape_unsafe_chars(str) {\n\treturn str.replace(unsafe_chars, escape_unsafe_char);\n}\n\n/** @param {string} key */\nfunction safe_key(key) {\n\treturn /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key)\n\t\t? key\n\t\t: escape_unsafe_chars(JSON.stringify(key));\n}\n\n/** @param {string} key */\nfunction safe_prop(key) {\n\treturn /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key)\n\t\t? `.${key}`\n\t\t: `[${escape_unsafe_chars(JSON.stringify(key))}]`;\n}\n\n/** @param {any} thing */\nfunction stringify_primitive(thing) {\n\tif (typeof thing === 'string') return stringify_string(thing);\n\tif (thing === void 0) return 'void 0';\n\tif (thing === 0 && 1 / thing < 0) return '-0';\n\tconst str = String(thing);\n\tif (typeof thing === 'number') return str.replace(/^(-)?0\\./, '$1.');\n\tif (typeof thing === 'bigint') return thing + 'n';\n\treturn str;\n}\n", "/** @import { Component } from 'svelte' */\n/** @import { Csp, HydratableContext, RenderOutput, SSRContext, SyncRenderOutput, Sha256Source } from './types.js' */\n/** @import { MaybePromise } from '#shared' */\nimport { async_mode_flag } from '../flags/index.js';\nimport { abort } from './abort-signal.js';\nimport { pop, push, set_ssr_context, ssr_context, save } from './context.js';\nimport * as e from './errors.js';\nimport * as w from './warnings.js';\nimport { BLOCK_CLOSE, BLOCK_OPEN } from './hydration.js';\nimport { attributes } from './index.js';\nimport { get_render_context, with_render_context, init_render_context } from './render-context.js';\nimport { sha256 } from './crypto.js';\nimport * as devalue from 'devalue';\n\n/** @typedef {'head' | 'body'} RendererType */\n/** @typedef {{ [key in RendererType]: string }} AccumulatedContent */\n\n/**\n * @typedef {string | Renderer} RendererItem\n */\n\n/**\n * Renderers are basically a tree of `string | Renderer`s, where each `Renderer` in the tree represents\n * work that may or may not have completed. A renderer can be {@link collect}ed to aggregate the\n * content from itself and all of its children, but this will throw if any of the children are\n * performing asynchronous work. To asynchronously collect a renderer, just `await` it.\n *\n * The `string` values within a renderer are always associated with the {@link type} of that renderer. To switch types,\n * call {@link child} with a different `type` argument.\n */\nexport class Renderer {\n\t/**\n\t * The contents of the renderer.\n\t * @type {RendererItem[]}\n\t */\n\t#out = [];\n\n\t/**\n\t * Any `onDestroy` callbacks registered during execution of this renderer.\n\t * @type {(() => void)[] | undefined}\n\t */\n\t#on_destroy = undefined;\n\n\t/**\n\t * Whether this renderer is a component body.\n\t * @type {boolean}\n\t */\n\t#is_component_body = false;\n\n\t/**\n\t * The type of string content that this renderer is accumulating.\n\t * @type {RendererType}\n\t */\n\ttype;\n\n\t/** @type {Renderer | undefined} */\n\t#parent;\n\n\t/**\n\t * Asynchronous work associated with this renderer\n\t * @type {Promise<void> | undefined}\n\t */\n\tpromise = undefined;\n\n\t/**\n\t * State which is associated with the content tree as a whole.\n\t * It will be re-exposed, uncopied, on all children.\n\t * @type {SSRState}\n\t * @readonly\n\t */\n\tglobal;\n\n\t/**\n\t * State that is local to the branch it is declared in.\n\t * It will be shallow-copied to all children.\n\t *\n\t * @type {{ select_value: string | undefined }}\n\t */\n\tlocal;\n\n\t/**\n\t * @param {SSRState} global\n\t * @param {Renderer | undefined} [parent]\n\t */\n\tconstructor(global, parent) {\n\t\tthis.#parent = parent;\n\n\t\tthis.global = global;\n\t\tthis.local = parent ? { ...parent.local } : { select_value: undefined };\n\t\tthis.type = parent ? parent.type : 'body';\n\t}\n\n\t/**\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\thead(fn) {\n\t\tconst head = new Renderer(this.global, this);\n\t\thead.type = 'head';\n\n\t\tthis.#out.push(head);\n\t\thead.child(fn);\n\t}\n\n\t/**\n\t * @param {Array<Promise<void>>} blockers\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\tasync_block(blockers, fn) {\n\t\tthis.#out.push(BLOCK_OPEN);\n\t\tthis.async(blockers, fn);\n\t\tthis.#out.push(BLOCK_CLOSE);\n\t}\n\n\t/**\n\t * @param {Array<Promise<void>>} blockers\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\tasync(blockers, fn) {\n\t\tlet callback = fn;\n\n\t\tif (blockers.length > 0) {\n\t\t\tconst context = ssr_context;\n\n\t\t\tcallback = (renderer) => {\n\t\t\t\treturn Promise.all(blockers).then(() => {\n\t\t\t\t\tconst previous_context = ssr_context;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tset_ssr_context(context);\n\t\t\t\t\t\treturn fn(renderer);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tset_ssr_context(previous_context);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tthis.child(callback);\n\t}\n\n\t/**\n\t * @param {Array<() => void>} thunks\n\t */\n\trun(thunks) {\n\t\tconst context = ssr_context;\n\n\t\tlet promise = Promise.resolve(thunks[0]());\n\t\tconst promises = [promise];\n\n\t\tfor (const fn of thunks.slice(1)) {\n\t\t\tpromise = promise.then(() => {\n\t\t\t\tconst previous_context = ssr_context;\n\t\t\t\tset_ssr_context(context);\n\n\t\t\t\ttry {\n\t\t\t\t\treturn fn();\n\t\t\t\t} finally {\n\t\t\t\t\tset_ssr_context(previous_context);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tpromises.push(promise);\n\t\t}\n\n\t\treturn promises;\n\t}\n\n\t/**\n\t * Create a child renderer. The child renderer inherits the state from the parent,\n\t * but has its own content.\n\t * @param {(renderer: Renderer) => MaybePromise<void>} fn\n\t */\n\tchild(fn) {\n\t\tconst child = new Renderer(this.global, this);\n\t\tthis.#out.push(child);\n\n\t\tconst parent = ssr_context;\n\n\t\tset_ssr_context({\n\t\t\t...ssr_context,\n\t\t\tp: parent,\n\t\t\tc: null,\n\t\t\tr: child\n\t\t});\n\n\t\tconst result = fn(child);\n\n\t\tset_ssr_context(parent);\n\n\t\tif (result instanceof Promise) {\n\t\t\tif (child.global.mode === 'sync') {\n\t\t\t\te.await_invalid();\n\t\t\t}\n\t\t\t// just to avoid unhandled promise rejections -- we'll end up throwing in `collect_async` if something fails\n\t\t\tresult.catch(() => {});\n\t\t\tchild.promise = result;\n\t\t}\n\n\t\treturn child;\n\t}\n\n\t/**\n\t * Create a component renderer. The component renderer inherits the state from the parent,\n\t * but has its own content. It is treated as an ordering boundary for ondestroy callbacks.\n\t * @param {(renderer: Renderer) => MaybePromise<void>} fn\n\t * @param {Function} [component_fn]\n\t * @returns {void}\n\t */\n\tcomponent(fn, component_fn) {\n\t\tpush(component_fn);\n\t\tconst child = this.child(fn);\n\t\tchild.#is_component_body = true;\n\t\tpop();\n\t}\n\n\t/**\n\t * @param {Record<string, any>} attrs\n\t * @param {(renderer: Renderer) => void} fn\n\t * @param {string | undefined} [css_hash]\n\t * @param {Record<string, boolean> | undefined} [classes]\n\t * @param {Record<string, string> | undefined} [styles]\n\t * @param {number | undefined} [flags]\n\t * @param {boolean | undefined} [is_rich]\n\t * @returns {void}\n\t */\n\tselect(attrs, fn, css_hash, classes, styles, flags, is_rich) {\n\t\tconst { value, ...select_attrs } = attrs;\n\n\t\tthis.push(`<select${attributes(select_attrs, css_hash, classes, styles, flags)}>`);\n\t\tthis.child((renderer) => {\n\t\t\trenderer.local.select_value = value;\n\t\t\tfn(renderer);\n\t\t});\n\t\tthis.push(`${is_rich ? '<!>' : ''}</select>`);\n\t}\n\n\t/**\n\t * @param {Record<string, any>} attrs\n\t * @param {string | number | boolean | ((renderer: Renderer) => void)} body\n\t * @param {string | undefined} [css_hash]\n\t * @param {Record<string, boolean> | undefined} [classes]\n\t * @param {Record<string, string> | undefined} [styles]\n\t * @param {number | undefined} [flags]\n\t * @param {boolean | undefined} [is_rich]\n\t */\n\toption(attrs, body, css_hash, classes, styles, flags, is_rich) {\n\t\tthis.#out.push(`<option${attributes(attrs, css_hash, classes, styles, flags)}`);\n\n\t\t/**\n\t\t * @param {Renderer} renderer\n\t\t * @param {any} value\n\t\t * @param {{ head?: string, body: any }} content\n\t\t */\n\t\tconst close = (renderer, value, { head, body }) => {\n\t\t\tif ('value' in attrs) {\n\t\t\t\tvalue = attrs.value;\n\t\t\t}\n\n\t\t\tif (value === this.local.select_value) {\n\t\t\t\trenderer.#out.push(' selected');\n\t\t\t}\n\n\t\t\trenderer.#out.push(`>${body}${is_rich ? '<!>' : ''}</option>`);\n\n\t\t\t// super edge case, but may as well handle it\n\t\t\tif (head) {\n\t\t\t\trenderer.head((child) => child.push(head));\n\t\t\t}\n\t\t};\n\n\t\tif (typeof body === 'function') {\n\t\t\tthis.child((renderer) => {\n\t\t\t\tconst r = new Renderer(this.global, this);\n\t\t\t\tbody(r);\n\n\t\t\t\tif (this.global.mode === 'async') {\n\t\t\t\t\treturn r.#collect_content_async().then((content) => {\n\t\t\t\t\t\tclose(renderer, content.body.replaceAll('<!---->', ''), content);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst content = r.#collect_content();\n\t\t\t\t\tclose(renderer, content.body.replaceAll('<!---->', ''), content);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tclose(this, body, { body });\n\t\t}\n\t}\n\n\t/**\n\t * @param {(renderer: Renderer) => void} fn\n\t */\n\ttitle(fn) {\n\t\tconst path = this.get_path();\n\n\t\t/** @param {string} head */\n\t\tconst close = (head) => {\n\t\t\tthis.global.set_title(head, path);\n\t\t};\n\n\t\tthis.child((renderer) => {\n\t\t\tconst r = new Renderer(renderer.global, renderer);\n\t\t\tfn(r);\n\n\t\t\tif (renderer.global.mode === 'async') {\n\t\t\t\treturn r.#collect_content_async().then((content) => {\n\t\t\t\t\tclose(content.head);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst content = r.#collect_content();\n\t\t\t\tclose(content.head);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @param {string | (() => Promise<string>)} content\n\t */\n\tpush(content) {\n\t\tif (typeof content === 'function') {\n\t\t\tthis.child(async (renderer) => renderer.push(await content()));\n\t\t} else {\n\t\t\tthis.#out.push(content);\n\t\t}\n\t}\n\n\t/**\n\t * @param {() => void} fn\n\t */\n\ton_destroy(fn) {\n\t\t(this.#on_destroy ??= []).push(fn);\n\t}\n\n\t/**\n\t * @returns {number[]}\n\t */\n\tget_path() {\n\t\treturn this.#parent ? [...this.#parent.get_path(), this.#parent.#out.indexOf(this)] : [];\n\t}\n\n\t/**\n\t * @deprecated this is needed for legacy component bindings\n\t */\n\tcopy() {\n\t\tconst copy = new Renderer(this.global, this.#parent);\n\t\tcopy.#out = this.#out.map((item) => (item instanceof Renderer ? item.copy() : item));\n\t\tcopy.promise = this.promise;\n\t\treturn copy;\n\t}\n\n\t/**\n\t * @param {Renderer} other\n\t * @deprecated this is needed for legacy component bindings\n\t */\n\tsubsume(other) {\n\t\tif (this.global.mode !== other.global.mode) {\n\t\t\tthrow new Error(\n\t\t\t\t\"invariant: A renderer cannot switch modes. If you're seeing this, there's a compiler bug. File an issue!\"\n\t\t\t);\n\t\t}\n\n\t\tthis.local = other.local;\n\t\tthis.#out = other.#out.map((item) => {\n\t\t\tif (item instanceof Renderer) {\n\t\t\t\titem.subsume(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\tthis.promise = other.promise;\n\t\tthis.type = other.type;\n\t}\n\n\tget length() {\n\t\treturn this.#out.length;\n\t}\n\n\t/**\n\t * Only available on the server and when compiling with the `server` option.\n\t * Takes a component and returns an object with `body` and `head` properties on it, which you can use to populate the HTML when server-rendering your app.\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string; csp?: Csp }} [options]\n\t * @returns {RenderOutput}\n\t */\n\tstatic render(component, options = {}) {\n\t\t/** @type {AccumulatedContent | undefined} */\n\t\tlet sync;\n\t\t/** @type {Promise<AccumulatedContent & { hashes: { script: Sha256Source[] } }> | undefined} */\n\t\tlet async;\n\n\t\tconst result = /** @type {RenderOutput} */ ({});\n\t\t// making these properties non-enumerable so that console.logging\n\t\t// doesn't trigger a sync render\n\t\tObject.defineProperties(result, {\n\t\t\thtml: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).body;\n\t\t\t\t}\n\t\t\t},\n\t\t\thead: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).head;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody: {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn (sync ??= Renderer.#render(component, options)).body;\n\t\t\t\t}\n\t\t\t},\n\t\t\thashes: {\n\t\t\t\tvalue: {\n\t\t\t\t\tscript: ''\n\t\t\t\t}\n\t\t\t},\n\t\t\tthen: {\n\t\t\t\tvalue:\n\t\t\t\t\t/**\n\t\t\t\t\t * this is not type-safe, but honestly it's the best I can do right now, and it's a straightforward function.\n\t\t\t\t\t *\n\t\t\t\t\t * @template TResult1\n\t\t\t\t\t * @template [TResult2=never]\n\t\t\t\t\t * @param { (value: SyncRenderOutput) => TResult1 } onfulfilled\n\t\t\t\t\t * @param { (reason: unknown) => TResult2 } onrejected\n\t\t\t\t\t */\n\t\t\t\t\t(onfulfilled, onrejected) => {\n\t\t\t\t\t\tif (!async_mode_flag) {\n\t\t\t\t\t\t\tconst result = (sync ??= Renderer.#render(component, options));\n\t\t\t\t\t\t\tconst user_result = onfulfilled({\n\t\t\t\t\t\t\t\thead: result.head,\n\t\t\t\t\t\t\t\tbody: result.body,\n\t\t\t\t\t\t\t\thtml: result.body,\n\t\t\t\t\t\t\t\thashes: { script: [] }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn Promise.resolve(user_result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tasync ??= init_render_context().then(() =>\n\t\t\t\t\t\t\twith_render_context(() => Renderer.#render_async(component, options))\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn async.then((result) => {\n\t\t\t\t\t\t\tObject.defineProperty(result, 'html', {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\t\t\t\t\tget: () => {\n\t\t\t\t\t\t\t\t\te.html_deprecated();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn onfulfilled(/** @type {SyncRenderOutput} */ (result));\n\t\t\t\t\t\t}, onrejected);\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Collect all of the `onDestroy` callbacks registered during rendering. In an async context, this is only safe to call\n\t * after awaiting `collect_async`.\n\t *\n\t * Child renderers are \"porous\" and don't affect execution order, but component body renderers\n\t * create ordering boundaries. Within a renderer, callbacks run in order until hitting a component boundary.\n\t * @returns {Iterable<() => void>}\n\t */\n\t*#collect_on_destroy() {\n\t\tfor (const component of this.#traverse_components()) {\n\t\t\tyield* component.#collect_ondestroy();\n\t\t}\n\t}\n\n\t/**\n\t * Performs a depth-first search of renderers, yielding the deepest components first, then additional components as we backtrack up the tree.\n\t * @returns {Iterable<Renderer>}\n\t */\n\t*#traverse_components() {\n\t\tfor (const child of this.#out) {\n\t\t\tif (typeof child !== 'string') {\n\t\t\t\tyield* child.#traverse_components();\n\t\t\t}\n\t\t}\n\t\tif (this.#is_component_body) {\n\t\t\tyield this;\n\t\t}\n\t}\n\n\t/**\n\t * @returns {Iterable<() => void>}\n\t */\n\t*#collect_ondestroy() {\n\t\tif (this.#on_destroy) {\n\t\t\tfor (const fn of this.#on_destroy) {\n\t\t\t\tyield fn;\n\t\t\t}\n\t\t}\n\t\tfor (const child of this.#out) {\n\t\t\tif (child instanceof Renderer && !child.#is_component_body) {\n\t\t\t\tyield* child.#collect_ondestroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Render a component. Throws if any of the children are performing asynchronous work.\n\t *\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string }} options\n\t * @returns {AccumulatedContent}\n\t */\n\tstatic #render(component, options) {\n\t\tvar previous_context = ssr_context;\n\t\ttry {\n\t\t\tconst renderer = Renderer.#open_render('sync', component, options);\n\n\t\t\tconst content = renderer.#collect_content();\n\t\t\treturn Renderer.#close_render(content, renderer);\n\t\t} finally {\n\t\t\tabort();\n\t\t\tset_ssr_context(previous_context);\n\t\t}\n\t}\n\n\t/**\n\t * Render a component.\n\t *\n\t * @template {Record<string, any>} Props\n\t * @param {Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string; csp?: Csp }} options\n\t * @returns {Promise<AccumulatedContent & { hashes: { script: Sha256Source[] } }>}\n\t */\n\tstatic async #render_async(component, options) {\n\t\tconst previous_context = ssr_context;\n\n\t\ttry {\n\t\t\tconst renderer = Renderer.#open_render('async', component, options);\n\t\t\tconst content = await renderer.#collect_content_async();\n\t\t\tconst hydratables = await renderer.#collect_hydratables();\n\t\t\tif (hydratables !== null) {\n\t\t\t\tcontent.head = hydratables + content.head;\n\t\t\t}\n\t\t\treturn Renderer.#close_render(content, renderer);\n\t\t} finally {\n\t\t\tset_ssr_context(previous_context);\n\t\t\tabort();\n\t\t}\n\t}\n\n\t/**\n\t * Collect all of the code from the `out` array and return it as a string, or a promise resolving to a string.\n\t * @param {AccumulatedContent} content\n\t * @returns {AccumulatedContent}\n\t */\n\t#collect_content(content = { head: '', body: '' }) {\n\t\tfor (const item of this.#out) {\n\t\t\tif (typeof item === 'string') {\n\t\t\t\tcontent[this.type] += item;\n\t\t\t} else if (item instanceof Renderer) {\n\t\t\t\titem.#collect_content(content);\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t}\n\n\t/**\n\t * Collect all of the code from the `out` array and return it as a string.\n\t * @param {AccumulatedContent} content\n\t * @returns {Promise<AccumulatedContent>}\n\t */\n\tasync #collect_content_async(content = { head: '', body: '' }) {\n\t\tawait this.promise;\n\n\t\t// no danger to sequentially awaiting stuff in here; all of the work is already kicked off\n\t\tfor (const item of this.#out) {\n\t\t\tif (typeof item === 'string') {\n\t\t\t\tcontent[this.type] += item;\n\t\t\t} else if (item instanceof Renderer) {\n\t\t\t\tawait item.#collect_content_async(content);\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t}\n\n\tasync #collect_hydratables() {\n\t\tconst ctx = get_render_context().hydratable;\n\n\t\tfor (const [_, key] of ctx.unresolved_promises) {\n\t\t\t// this is a problem -- it means we've finished the render but we're still waiting on a promise to resolve so we can\n\t\t\t// serialize it, so we're blocking the response on useless content.\n\t\t\tw.unresolved_hydratable(key, ctx.lookup.get(key)?.stack ?? '<missing stack trace>');\n\t\t}\n\n\t\tfor (const comparison of ctx.comparisons) {\n\t\t\t// these reject if there's a mismatch\n\t\t\tawait comparison;\n\t\t}\n\n\t\treturn await this.#hydratable_block(ctx);\n\t}\n\n\t/**\n\t * @template {Record<string, any>} Props\n\t * @param {'sync' | 'async'} mode\n\t * @param {import('svelte').Component<Props>} component\n\t * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string; csp?: Csp }} options\n\t * @returns {Renderer}\n\t */\n\tstatic #open_render(mode, component, options) {\n\t\tconst renderer = new Renderer(\n\t\t\tnew SSRState(mode, options.idPrefix ? options.idPrefix + '-' : '', options.csp)\n\t\t);\n\n\t\trenderer.push(BLOCK_OPEN);\n\n\t\tif (options.context) {\n\t\t\tpush();\n\t\t\t/** @type {SSRContext} */ (ssr_context).c = options.context;\n\t\t\t/** @type {SSRContext} */ (ssr_context).r = renderer;\n\t\t}\n\n\t\t// @ts-expect-error\n\t\tcomponent(renderer, options.props ?? {});\n\n\t\tif (options.context) {\n\t\t\tpop();\n\t\t}\n\n\t\trenderer.push(BLOCK_CLOSE);\n\n\t\treturn renderer;\n\t}\n\n\t/**\n\t * @param {AccumulatedContent} content\n\t * @param {Renderer} renderer\n\t * @returns {AccumulatedContent & { hashes: { script: Sha256Source[] } }}\n\t */\n\tstatic #close_render(content, renderer) {\n\t\tfor (const cleanup of renderer.#collect_on_destroy()) {\n\t\t\tcleanup();\n\t\t}\n\n\t\tlet head = content.head + renderer.global.get_title();\n\t\tlet body = content.body;\n\n\t\tfor (const { hash, code } of renderer.global.css) {\n\t\t\thead += `<style id=\"${hash}\">${code}</style>`;\n\t\t}\n\n\t\treturn {\n\t\t\thead,\n\t\t\tbody,\n\t\t\thashes: {\n\t\t\t\tscript: renderer.global.csp.script_hashes\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * @param {HydratableContext} ctx\n\t */\n\tasync #hydratable_block(ctx) {\n\t\tif (ctx.lookup.size === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet entries = [];\n\t\tlet has_promises = false;\n\n\t\tfor (const [k, v] of ctx.lookup) {\n\t\t\tif (v.promises) {\n\t\t\t\thas_promises = true;\n\t\t\t\tfor (const p of v.promises) await p;\n\t\t\t}\n\n\t\t\tentries.push(`[${devalue.uneval(k)},${v.serialized}]`);\n\t\t}\n\n\t\tlet prelude = `const h = (window.__svelte ??= {}).h ??= new Map();`;\n\n\t\tif (has_promises) {\n\t\t\tprelude = `const r = (v) => Promise.resolve(v);\n\t\t\t\t${prelude}`;\n\t\t}\n\n\t\tconst body = `\n\t\t\t{\n\t\t\t\t${prelude}\n\n\t\t\t\tfor (const [k, v] of [\n\t\t\t\t\t${entries.join(',\\n\\t\\t\\t\\t\\t')}\n\t\t\t\t]) {\n\t\t\t\t\th.set(k, v);\n\t\t\t\t}\n\t\t\t}\n\t\t`;\n\n\t\tlet csp_attr = '';\n\t\tif (this.global.csp.nonce) {\n\t\t\tcsp_attr = ` nonce=\"${this.global.csp.nonce}\"`;\n\t\t} else if (this.global.csp.hash) {\n\t\t\t// note to future selves: this doesn't need to be optimized with a Map<body, hash>\n\t\t\t// because the it's impossible for identical data to occur multiple times in a single render\n\t\t\t// (this would require the same hydratable key:value pair to be serialized multiple times)\n\t\t\tconst hash = await sha256(body);\n\t\t\tthis.global.csp.script_hashes.push(`sha256-${hash}`);\n\t\t}\n\n\t\treturn `\\n\\t\\t<script${csp_attr}>${body}</script>`;\n\t}\n}\n\nexport class SSRState {\n\t/** @readonly @type {Csp & { script_hashes: Sha256Source[] }} */\n\tcsp;\n\n\t/** @readonly @type {'sync' | 'async'} */\n\tmode;\n\n\t/** @readonly @type {() => string} */\n\tuid;\n\n\t/** @readonly @type {Set<{ hash: string; code: string }>} */\n\tcss = new Set();\n\n\t/** @type {{ path: number[], value: string }} */\n\t#title = { path: [], value: '' };\n\n\t/**\n\t * @param {'sync' | 'async'} mode\n\t * @param {string} id_prefix\n\t * @param {Csp} csp\n\t */\n\tconstructor(mode, id_prefix = '', csp = { hash: false }) {\n\t\tthis.mode = mode;\n\t\tthis.csp = { ...csp, script_hashes: [] };\n\n\t\tlet uid = 1;\n\t\tthis.uid = () => `${id_prefix}s${uid++}`;\n\t}\n\n\tget_title() {\n\t\treturn this.#title.value;\n\t}\n\n\t/**\n\t * Performs a depth-first (lexicographic) comparison using the path. Rejects sets\n\t * from earlier than or equal to the current value.\n\t * @param {string} value\n\t * @param {number[]} path\n\t */\n\tset_title(value, path) {\n\t\tconst current = this.#title.path;\n\n\t\tlet i = 0;\n\t\tlet l = Math.min(path.length, current.length);\n\n\t\t// skip identical prefixes - [1, 2, 3, ...] === [1, 2, 3, ...]\n\t\twhile (i < l && path[i] === current[i]) i += 1;\n\n\t\tif (path[i] === undefined) return;\n\n\t\t// replace title if\n\t\t// - incoming path is longer - [7, 8, 9] > [7, 8]\n\t\t// - incoming path is later  - [7, 8, 9] > [7, 8, 8]\n\t\tif (current[i] === undefined || path[i] > current[i]) {\n\t\t\tthis.#title.path = path;\n\t\t\tthis.#title.value = value;\n\t\t}\n\t}\n}\n", "import { DEV } from 'esm-env';\nimport { hash } from '../../../utils.js';\n\n/**\n * @param {string} value\n */\nexport function html(value) {\n\tvar html = String(value ?? '');\n\tvar open = DEV ? `<!--${hash(html)}-->` : '<!---->';\n\treturn open + html + '<!---->';\n}\n", "/**\n * Map of elements that have certain elements that are not allowed inside them, in the sense that they will auto-close the parent/ancestor element.\n * Theoretically one could take advantage of it but most of the time it will just result in confusing behavior and break when SSR'd.\n * There are more elements that are invalid inside other elements, but they're not auto-closed and so don't break SSR and are therefore not listed here.\n * @type {Record<string, { direct: string[]} | { descendant: string[]; reset_by?: string[] }>}\n */\nconst autoclosing_children = {\n\t// based on http://developers.whatwg.org/syntax.html#syntax-tag-omission\n\tli: { direct: ['li'] },\n\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dt#technical_summary\n\tdt: { descendant: ['dt', 'dd'], reset_by: ['dl'] },\n\tdd: { descendant: ['dt', 'dd'], reset_by: ['dl'] },\n\tp: {\n\t\tdescendant: [\n\t\t\t'address',\n\t\t\t'article',\n\t\t\t'aside',\n\t\t\t'blockquote',\n\t\t\t'div',\n\t\t\t'dl',\n\t\t\t'fieldset',\n\t\t\t'footer',\n\t\t\t'form',\n\t\t\t'h1',\n\t\t\t'h2',\n\t\t\t'h3',\n\t\t\t'h4',\n\t\t\t'h5',\n\t\t\t'h6',\n\t\t\t'header',\n\t\t\t'hgroup',\n\t\t\t'hr',\n\t\t\t'main',\n\t\t\t'menu',\n\t\t\t'nav',\n\t\t\t'ol',\n\t\t\t'p',\n\t\t\t'pre',\n\t\t\t'section',\n\t\t\t'table',\n\t\t\t'ul'\n\t\t]\n\t},\n\trt: { descendant: ['rt', 'rp'] },\n\trp: { descendant: ['rt', 'rp'] },\n\toptgroup: { descendant: ['optgroup'] },\n\toption: { descendant: ['option', 'optgroup'] },\n\tthead: { direct: ['tbody', 'tfoot'] },\n\ttbody: { direct: ['tbody', 'tfoot'] },\n\ttfoot: { direct: ['tbody'] },\n\ttr: { direct: ['tr', 'tbody'] },\n\ttd: { direct: ['td', 'th', 'tr'] },\n\tth: { direct: ['td', 'th', 'tr'] }\n};\n\n/**\n * Returns true if the tag is either the last in the list of siblings and will be autoclosed,\n * or not allowed inside the parent tag such that it will auto-close it. The latter results\n * in the browser repairing the HTML, which will likely result in an error during hydration.\n * @param {string} current\n * @param {string} [next]\n */\nexport function closing_tag_omitted(current, next) {\n\tconst disallowed = autoclosing_children[current];\n\tif (disallowed) {\n\t\tif (\n\t\t\t!next ||\n\t\t\t('direct' in disallowed ? disallowed.direct : disallowed.descendant).includes(next)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n/**\n * Map of elements that have certain elements that are not allowed inside them, in the sense that the browser will somehow repair the HTML.\n * There are more elements that are invalid inside other elements, but they're not repaired and so don't break SSR and are therefore not listed here.\n * @type {Record<string, { direct: string[]} | { descendant: string[]; reset_by?: string[]; only?: string[] } | { only: string[] }>}\n */\nconst disallowed_children = {\n\t...autoclosing_children,\n\t// Strictly speaking, seeing an <option> doesn't mean we're in a <select>, but we assume it here\n\t// option or optgroup does not have an `only` restriction because newer browsers support rich HTML content\n\t// inside option elements. For older browsers, hydration will handle the mismatch.\n\tform: { descendant: ['form'] },\n\ta: { descendant: ['a'] },\n\tbutton: { descendant: ['button'] },\n\th1: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\th2: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\th3: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\th4: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\th5: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\th6: { descendant: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] },\n\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-intd\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-incaption\n\t// No special behavior since these rules fall back to \"in body\" mode for\n\t// all except special table nodes which cause bad parsing behavior anyway.\n\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-intd\n\ttr: { only: ['th', 'td', 'style', 'script', 'template'] },\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-intbody\n\ttbody: { only: ['tr', 'style', 'script', 'template'] },\n\tthead: { only: ['tr', 'style', 'script', 'template'] },\n\ttfoot: { only: ['tr', 'style', 'script', 'template'] },\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-incolgroup\n\tcolgroup: { only: ['col', 'template'] },\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-intable\n\ttable: {\n\t\tonly: ['caption', 'colgroup', 'tbody', 'thead', 'tfoot', 'style', 'script', 'template']\n\t},\n\t// https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-inhead\n\thead: {\n\t\tonly: [\n\t\t\t'base',\n\t\t\t'basefont',\n\t\t\t'bgsound',\n\t\t\t'link',\n\t\t\t'meta',\n\t\t\t'title',\n\t\t\t'noscript',\n\t\t\t'noframes',\n\t\t\t'style',\n\t\t\t'script',\n\t\t\t'template'\n\t\t]\n\t},\n\t// https://html.spec.whatwg.org/multipage/semantics.html#the-html-element\n\thtml: { only: ['head', 'body', 'frameset'] },\n\tframeset: { only: ['frame'] },\n\t'#document': { only: ['html'] }\n};\n\n/**\n * Returns an error message if the tag is not allowed inside the ancestor tag (which is grandparent and above) such that it will result\n * in the browser repairing the HTML, which will likely result in an error during hydration.\n * @param {string} child_tag\n * @param {string[]} ancestors All nodes starting with the parent, up until the ancestor, which means two entries minimum\n * @param {string} [child_loc]\n * @param {string} [ancestor_loc]\n * @returns {string | null}\n */\nexport function is_tag_valid_with_ancestor(child_tag, ancestors, child_loc, ancestor_loc) {\n\tif (child_tag.includes('-')) return null; // custom elements can be anything\n\n\tconst ancestor_tag = ancestors[ancestors.length - 1];\n\tconst disallowed = disallowed_children[ancestor_tag];\n\tif (!disallowed) return null;\n\n\tif ('reset_by' in disallowed && disallowed.reset_by) {\n\t\tfor (let i = ancestors.length - 2; i >= 0; i--) {\n\t\t\tconst ancestor = ancestors[i];\n\t\t\tif (ancestor.includes('-')) return null; // custom elements can be anything\n\n\t\t\t// A reset means that forbidden descendants are allowed again\n\t\t\tif (disallowed.reset_by.includes(ancestors[i])) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ('descendant' in disallowed && disallowed.descendant.includes(child_tag)) {\n\t\tconst child = child_loc ? `\\`<${child_tag}>\\` (${child_loc})` : `\\`<${child_tag}>\\``;\n\t\tconst ancestor = ancestor_loc\n\t\t\t? `\\`<${ancestor_tag}>\\` (${ancestor_loc})`\n\t\t\t: `\\`<${ancestor_tag}>\\``;\n\n\t\treturn `${child} cannot be a descendant of ${ancestor}`;\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns an error message if the tag is not allowed inside the parent tag such that it will result\n * in the browser repairing the HTML, which will likely result in an error during hydration.\n * @param {string} child_tag\n * @param {string} parent_tag\n * @param {string} [child_loc]\n * @param {string} [parent_loc]\n * @returns {string | null}\n */\nexport function is_tag_valid_with_parent(child_tag, parent_tag, child_loc, parent_loc) {\n\tif (child_tag.includes('-') || parent_tag?.includes('-')) return null; // custom elements can be anything\n\n\tif (parent_tag === 'template') return null; // no errors or warning should be thrown in immediate children of template tags\n\n\tconst disallowed = disallowed_children[parent_tag];\n\n\tconst child = child_loc ? `\\`<${child_tag}>\\` (${child_loc})` : `\\`<${child_tag}>\\``;\n\tconst parent = parent_loc ? `\\`<${parent_tag}>\\` (${parent_loc})` : `\\`<${parent_tag}>\\``;\n\n\tif (disallowed) {\n\t\tif ('direct' in disallowed && disallowed.direct.includes(child_tag)) {\n\t\t\treturn `${child} cannot be a direct child of ${parent}`;\n\t\t}\n\n\t\tif ('descendant' in disallowed && disallowed.descendant.includes(child_tag)) {\n\t\t\treturn `${child} cannot be a child of ${parent}`;\n\t\t}\n\n\t\tif ('only' in disallowed && disallowed.only) {\n\t\t\tif (disallowed.only.includes(child_tag)) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\treturn `${child} cannot be a child of ${parent}. \\`<${parent_tag}>\\` only allows these children: ${disallowed.only.map((d) => `\\`<${d}>\\``).join(', ')}`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// These tags are only valid with a few parents that have special child\n\t// parsing rules - if we're down here, then none of those matched and\n\t// so we allow it only if we don't know what the parent is, as all other\n\t// cases are invalid (and we only get into this function if we know the parent).\n\tswitch (child_tag) {\n\t\tcase 'body':\n\t\tcase 'caption':\n\t\tcase 'col':\n\t\tcase 'colgroup':\n\t\tcase 'frameset':\n\t\tcase 'frame':\n\t\tcase 'head':\n\t\tcase 'html':\n\t\t\treturn `${child} cannot be a child of ${parent}`;\n\t\tcase 'thead':\n\t\tcase 'tbody':\n\t\tcase 'tfoot':\n\t\t\treturn `${child} must be the child of a \\`<table>\\`, not a ${parent}`;\n\t\tcase 'td':\n\t\tcase 'th':\n\t\t\treturn `${child} must be the child of a \\`<tr>\\`, not a ${parent}`;\n\t\tcase 'tr':\n\t\t\treturn `\\`<tr>\\` must be the child of a \\`<thead>\\`, \\`<tbody>\\`, or \\`<tfoot>\\`, not a ${parent}`;\n\t}\n\n\treturn null;\n}\n", "/** @import { SSRContext } from '#server' */\nimport { FILENAME } from '../../constants.js';\nimport {\n\tis_tag_valid_with_ancestor,\n\tis_tag_valid_with_parent\n} from '../../html-tree-validation.js';\nimport { get_stack } from '../shared/dev.js';\nimport { set_ssr_context, ssr_context } from './context.js';\nimport * as e from './errors.js';\nimport { Renderer } from './renderer.js';\n\n// TODO move this\n/**\n * @typedef {{\n * \ttag: string;\n * \tparent: undefined | Element;\n *  filename: undefined | string;\n *  line: number;\n *  column: number;\n * }} Element\n */\n\n/**\n * This is exported so that it can be cleared between tests\n * @type {Set<string>}\n */\nexport let seen;\n\n/**\n * @param {Renderer} renderer\n * @param {string} message\n */\nfunction print_error(renderer, message) {\n\tmessage =\n\t\t`node_invalid_placement_ssr: ${message}\\n\\n` +\n\t\t'This can cause content to shift around as the browser repairs the HTML, and will likely result in a `hydration_mismatch` warning.';\n\n\tif ((seen ??= new Set()).has(message)) return;\n\tseen.add(message);\n\n\t// eslint-disable-next-line no-console\n\tconsole.error(message);\n\trenderer.head((r) =>\n\t\tr.push(\n\t\t\t// ensure that `</script>` can't leak in to the script contents\n\t\t\t`<script>console.error(${JSON.stringify(message).replaceAll('</', '<\\\\u002f')})</script>`\n\t\t)\n\t);\n}\n\n/**\n * @param {Renderer} renderer\n * @param {string} tag\n * @param {number} line\n * @param {number} column\n */\nexport function push_element(renderer, tag, line, column) {\n\tvar context = /** @type {SSRContext} */ (ssr_context);\n\tvar filename = context.function[FILENAME];\n\tvar parent = context.element;\n\tvar element = { tag, parent, filename, line, column };\n\n\tif (parent !== undefined) {\n\t\tvar ancestor = parent.parent;\n\t\tvar ancestors = [parent.tag];\n\n\t\tconst child_loc = filename ? `${filename}:${line}:${column}` : undefined;\n\t\tconst parent_loc = parent.filename\n\t\t\t? `${parent.filename}:${parent.line}:${parent.column}`\n\t\t\t: undefined;\n\n\t\tconst message = is_tag_valid_with_parent(tag, parent.tag, child_loc, parent_loc);\n\t\tif (message) print_error(renderer, message);\n\n\t\twhile (ancestor != null) {\n\t\t\tancestors.push(ancestor.tag);\n\t\t\tconst ancestor_loc = ancestor.filename\n\t\t\t\t? `${ancestor.filename}:${ancestor.line}:${ancestor.column}`\n\t\t\t\t: undefined;\n\n\t\t\tconst message = is_tag_valid_with_ancestor(tag, ancestors, child_loc, ancestor_loc);\n\t\t\tif (message) print_error(renderer, message);\n\n\t\t\tancestor = ancestor.parent;\n\t\t}\n\t}\n\n\tset_ssr_context({ ...context, p: context, element });\n}\n\nexport function pop_element() {\n\tset_ssr_context(/** @type {SSRContext} */ (ssr_context).p);\n}\n\n/**\n * @param {Renderer} renderer\n */\nexport function validate_snippet_args(renderer) {\n\tif (\n\t\ttypeof renderer !== 'object' ||\n\t\t// for some reason typescript consider the type of renderer as never after the first instanceof\n\t\t!(renderer instanceof Renderer)\n\t) {\n\t\te.invalid_snippet_arguments();\n\t}\n}\n\nexport function get_user_code_location() {\n\tconst stack = get_stack();\n\n\treturn stack\n\t\t.filter((line) => line.trim().startsWith('at '))\n\t\t.map((line) => line.replace(/\\((.*):\\d+:\\d+\\)$/, (_, file) => `(${file})`))\n\t\t.join('\\n');\n}\n", "/** @import { ComponentType, SvelteComponent, Component } from 'svelte' */\n/** @import { Csp, RenderOutput } from '#server' */\n/** @import { Store } from '#shared' */\nexport { FILENAME, HMR } from '../../constants.js';\nimport { attr, clsx, to_class, to_style } from '../shared/attributes.js';\nimport { is_promise, noop } from '../shared/utils.js';\nimport { subscribe_to_store } from '../../store/utils.js';\nimport {\n\tUNINITIALIZED,\n\tELEMENT_PRESERVE_ATTRIBUTE_CASE,\n\tELEMENT_IS_NAMESPACED,\n\tELEMENT_IS_INPUT\n} from '../../constants.js';\nimport { escape_html } from '../../escaping.js';\nimport { DEV } from 'esm-env';\nimport { EMPTY_COMMENT, BLOCK_CLOSE, BLOCK_OPEN, BLOCK_OPEN_ELSE } from './hydration.js';\nimport { validate_store } from '../shared/validate.js';\nimport { is_boolean_attribute, is_raw_text_element, is_void } from '../../utils.js';\nimport { Renderer } from './renderer.js';\nimport * as e from './errors.js';\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nconst INVALID_ATTR_NAME_CHAR_REGEX =\n\t/[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n\n/**\n * @param {Renderer} renderer\n * @param {string} tag\n * @param {() => void} attributes_fn\n * @param {() => void} children_fn\n * @returns {void}\n */\nexport function element(renderer, tag, attributes_fn = noop, children_fn = noop) {\n\trenderer.push('<!---->');\n\n\tif (tag) {\n\t\trenderer.push(`<${tag}`);\n\t\tattributes_fn();\n\t\trenderer.push(`>`);\n\n\t\tif (!is_void(tag)) {\n\t\t\tchildren_fn();\n\t\t\tif (!is_raw_text_element(tag)) {\n\t\t\t\trenderer.push(EMPTY_COMMENT);\n\t\t\t}\n\t\t\trenderer.push(`</${tag}>`);\n\t\t}\n\t}\n\n\trenderer.push('<!---->');\n}\n\n/**\n * Only available on the server and when compiling with the `server` option.\n * Takes a component and returns an object with `body` and `head` properties on it, which you can use to populate the HTML when server-rendering your app.\n * @template {Record<string, any>} Props\n * @param {Component<Props> | ComponentType<SvelteComponent<Props>>} component\n * @param {{ props?: Omit<Props, '$$slots' | '$$events'>; context?: Map<any, any>; idPrefix?: string; csp?: Csp }} [options]\n * @returns {RenderOutput}\n */\nexport function render(component, options = {}) {\n\tif (options.csp?.hash && options.csp.nonce) {\n\t\te.invalid_csp();\n\t}\n\treturn Renderer.render(/** @type {Component<Props>} */ (component), options);\n}\n\n/**\n * @param {string} hash\n * @param {Renderer} renderer\n * @param {(renderer: Renderer) => Promise<void> | void} fn\n * @returns {void}\n */\nexport function head(hash, renderer, fn) {\n\trenderer.head((renderer) => {\n\t\trenderer.push(`<!--${hash}-->`);\n\t\trenderer.child(fn);\n\t\trenderer.push(EMPTY_COMMENT);\n\t});\n}\n\n/**\n * @param {Renderer} renderer\n * @param {boolean} is_html\n * @param {Record<string, string>} props\n * @param {() => void} component\n * @param {boolean} dynamic\n * @returns {void}\n */\nexport function css_props(renderer, is_html, props, component, dynamic = false) {\n\tconst styles = style_object_to_string(props);\n\n\tif (is_html) {\n\t\trenderer.push(`<svelte-css-wrapper style=\"display: contents; ${styles}\">`);\n\t} else {\n\t\trenderer.push(`<g style=\"${styles}\">`);\n\t}\n\n\tif (dynamic) {\n\t\trenderer.push('<!---->');\n\t}\n\n\tcomponent();\n\n\tif (is_html) {\n\t\trenderer.push(`<!----></svelte-css-wrapper>`);\n\t} else {\n\t\trenderer.push(`<!----></g>`);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} attrs\n * @param {string} [css_hash]\n * @param {Record<string, boolean>} [classes]\n * @param {Record<string, string>} [styles]\n * @param {number} [flags]\n * @returns {string}\n */\nexport function attributes(attrs, css_hash, classes, styles, flags = 0) {\n\tif (styles) {\n\t\tattrs.style = to_style(attrs.style, styles);\n\t}\n\n\tif (attrs.class) {\n\t\tattrs.class = clsx(attrs.class);\n\t}\n\n\tif (css_hash || classes) {\n\t\tattrs.class = to_class(attrs.class, css_hash, classes);\n\t}\n\n\tlet attr_str = '';\n\tlet name;\n\n\tconst is_html = (flags & ELEMENT_IS_NAMESPACED) === 0;\n\tconst lowercase = (flags & ELEMENT_PRESERVE_ATTRIBUTE_CASE) === 0;\n\tconst is_input = (flags & ELEMENT_IS_INPUT) !== 0;\n\n\tfor (name in attrs) {\n\t\t// omit functions, internal svelte properties and invalid attribute names\n\t\tif (typeof attrs[name] === 'function') continue;\n\t\tif (name[0] === '$' && name[1] === '$') continue; // faster than name.startsWith('$$')\n\t\tif (INVALID_ATTR_NAME_CHAR_REGEX.test(name)) continue;\n\n\t\tvar value = attrs[name];\n\n\t\tif (lowercase) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\n\t\tif (is_input) {\n\t\t\tif (name === 'defaultvalue' || name === 'defaultchecked') {\n\t\t\t\tname = name === 'defaultvalue' ? 'value' : 'checked';\n\t\t\t\tif (attrs[name]) continue;\n\t\t\t}\n\t\t}\n\n\t\tattr_str += attr(name, value, is_html && is_boolean_attribute(name));\n\t}\n\n\treturn attr_str;\n}\n\n/**\n * @param {Record<string, unknown>[]} props\n * @returns {Record<string, unknown>}\n */\nexport function spread_props(props) {\n\t/** @type {Record<string, unknown>} */\n\tconst merged_props = {};\n\tlet key;\n\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst obj = props[i];\n\t\tfor (key in obj) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(obj, key);\n\t\t\tif (desc) {\n\t\t\t\tObject.defineProperty(merged_props, key, desc);\n\t\t\t} else {\n\t\t\t\tmerged_props[key] = obj[key];\n\t\t\t}\n\t\t}\n\t}\n\treturn merged_props;\n}\n\n/**\n * @param {unknown} value\n * @returns {string}\n */\nexport function stringify(value) {\n\treturn typeof value === 'string' ? value : value == null ? '' : value + '';\n}\n\n/** @param {Record<string, string>} style_object */\nfunction style_object_to_string(style_object) {\n\treturn Object.keys(style_object)\n\t\t.filter(/** @param {any} key */ (key) => style_object[key] != null && style_object[key] !== '')\n\t\t.map(/** @param {any} key */ (key) => `${key}: ${escape_html(style_object[key], true)};`)\n\t\t.join(' ');\n}\n\n/**\n * @param {any} value\n * @param {string | undefined} [hash]\n * @param {Record<string, boolean>} [directives]\n */\nexport function attr_class(value, hash, directives) {\n\tvar result = to_class(value, hash, directives);\n\treturn result ? ` class=\"${escape_html(result, true)}\"` : '';\n}\n\n/**\n * @param {any} value\n * @param {Record<string,any>|[Record<string,any>,Record<string,any>]} [directives]\n */\nexport function attr_style(value, directives) {\n\tvar result = to_style(value, directives);\n\treturn result ? ` style=\"${escape_html(result, true)}\"` : '';\n}\n\n/**\n * @template V\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<V> | null | undefined} store\n * @returns {V}\n */\nexport function store_get(store_values, store_name, store) {\n\tif (DEV) {\n\t\tvalidate_store(store, store_name.slice(1));\n\t}\n\n\t// it could be that someone eagerly updates the store in the instance script, so\n\t// we should only reuse the store value in the template\n\tif (store_name in store_values && store_values[store_name][0] === store) {\n\t\treturn store_values[store_name][2];\n\t}\n\n\tstore_values[store_name]?.[1](); // if store was switched, unsubscribe from old store\n\tstore_values[store_name] = [store, null, undefined];\n\tconst unsub = subscribe_to_store(\n\t\tstore,\n\t\t/** @param {any} v */ (v) => (store_values[store_name][2] = v)\n\t);\n\tstore_values[store_name][1] = unsub;\n\treturn store_values[store_name][2];\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Updates a store with a new value.\n * @template V\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<V>} store\n * @param {any} expression\n */\nexport function store_mutate(store_values, store_name, store, expression) {\n\tstore_set(store, store_get(store_values, store_name, store));\n\treturn expression;\n}\n\n/**\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<number>} store\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store_values, store_name, store, d = 1) {\n\tlet store_value = store_get(store_values, store_name, store);\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Record<string, [any, any, any]>} store_values\n * @param {string} store_name\n * @param {Store<number>} store\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store_pre(store_values, store_name, store, d = 1) {\n\tconst value = store_get(store_values, store_name, store) + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/** @param {Record<string, [any, any, any]>} store_values */\nexport function unsubscribe_stores(store_values) {\n\tfor (const store_name in store_values) {\n\t\tstore_values[store_name][1]();\n\t}\n}\n\n/**\n * @param {Renderer} renderer\n * @param {Record<string, any>} $$props\n * @param {string} name\n * @param {Record<string, unknown>} slot_props\n * @param {null | (() => void)} fallback_fn\n * @returns {void}\n */\nexport function slot(renderer, $$props, name, slot_props, fallback_fn) {\n\tvar slot_fn = $$props.$$slots?.[name];\n\t// Interop: Can use snippets to fill slots\n\tif (slot_fn === true) {\n\t\tslot_fn = $$props[name === 'default' ? 'children' : name];\n\t}\n\n\tif (slot_fn !== undefined) {\n\t\tslot_fn(renderer, slot_props);\n\t} else {\n\t\tfallback_fn?.();\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} rest\n * @returns {Record<string, unknown>}\n */\nexport function rest_props(props, rest) {\n\t/** @type {Record<string, unknown>} */\n\tconst rest_props = {};\n\tlet key;\n\tfor (key in props) {\n\t\tif (!rest.includes(key)) {\n\t\t\trest_props[key] = props[key];\n\t\t}\n\t}\n\treturn rest_props;\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @returns {Record<string, unknown>}\n */\nexport function sanitize_props(props) {\n\tconst { children, $$slots, ...sanitized } = props;\n\treturn sanitized;\n}\n\n/**\n * @param {Record<string, any>} props\n * @returns {Record<string, boolean>}\n */\nexport function sanitize_slots(props) {\n\t/** @type {Record<string, boolean>} */\n\tconst sanitized = {};\n\tif (props.children) sanitized.default = true;\n\tfor (const key in props.$$slots) {\n\t\tsanitized[key] = true;\n\t}\n\treturn sanitized;\n}\n\n/**\n * Legacy mode: If the prop has a fallback and is bound in the\n * parent component, propagate the fallback value upwards.\n * @param {Record<string, unknown>} props_parent\n * @param {Record<string, unknown>} props_now\n */\nexport function bind_props(props_parent, props_now) {\n\tfor (const key in props_now) {\n\t\tconst initial_value = props_parent[key];\n\t\tconst value = props_now[key];\n\t\tif (\n\t\t\tinitial_value === undefined &&\n\t\t\tvalue !== undefined &&\n\t\t\tObject.getOwnPropertyDescriptor(props_parent, key)?.set\n\t\t) {\n\t\t\tprops_parent[key] = value;\n\t\t}\n\t}\n}\n\n/**\n * @template V\n * @param {Renderer} renderer\n * @param {Promise<V>} promise\n * @param {null | (() => void)} pending_fn\n * @param {(value: V) => void} then_fn\n * @returns {void}\n */\nfunction await_block(renderer, promise, pending_fn, then_fn) {\n\tif (is_promise(promise)) {\n\t\trenderer.push(BLOCK_OPEN);\n\t\tpromise.then(null, noop);\n\t\tif (pending_fn !== null) {\n\t\t\tpending_fn();\n\t\t}\n\t} else if (then_fn !== null) {\n\t\trenderer.push(BLOCK_OPEN_ELSE);\n\t\tthen_fn(promise);\n\t}\n}\n\nexport { await_block as await };\n\n/** @param {any} array_like_or_iterator */\nexport function ensure_array_like(array_like_or_iterator) {\n\tif (array_like_or_iterator) {\n\t\treturn array_like_or_iterator.length !== undefined\n\t\t\t? array_like_or_iterator\n\t\t\t: Array.from(array_like_or_iterator);\n\t}\n\treturn [];\n}\n\n/**\n * @template V\n * @param {() => V} get_value\n */\nexport function once(get_value) {\n\tlet value = /** @type {V} */ (UNINITIALIZED);\n\treturn () => {\n\t\tif (value === UNINITIALIZED) {\n\t\t\tvalue = get_value();\n\t\t}\n\t\treturn value;\n\t};\n}\n\n/**\n * Create an unique ID\n * @param {Renderer} renderer\n * @returns {string}\n */\nexport function props_id(renderer) {\n\tconst uid = renderer.global.uid();\n\trenderer.push('<!--$' + uid + '-->');\n\treturn uid;\n}\n\nexport { attr, clsx };\n\nexport { html } from './blocks/html.js';\n\nexport { save } from './context.js';\n\nexport { push_element, pop_element, validate_snippet_args } from './dev.js';\n\nexport { snapshot } from '../shared/clone.js';\n\nexport { fallback, to_array } from '../shared/utils.js';\n\nexport {\n\tinvalid_default_snippet,\n\tvalidate_dynamic_element_tag,\n\tvalidate_void_dynamic_element,\n\tprevent_snippet_stringification\n} from '../shared/validate.js';\n\nexport { escape_html as escape };\n\n/**\n * @template T\n * @param {()=>T} fn\n * @returns {(new_value?: T) => (T | void)}\n */\nexport function derived(fn) {\n\tconst get_value = once(fn);\n\t/**\n\t * @type {T | undefined}\n\t */\n\tlet updated_value;\n\n\treturn function (new_value) {\n\t\tif (arguments.length === 0) {\n\t\t\treturn updated_value ?? get_value();\n\t\t}\n\t\tupdated_value = new_value;\n\t\treturn updated_value;\n\t};\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAM,aAAa,OAAO,eAAe;AACzC,IAAM,kBAAkB,OAAO,oBAAoB;AACnD,IAAM,cAAc,OAAO,aAAa;AACxC,IAAM,gBAAgB;;;ACF7B,IAAI,aAAa;AAEV,SAAS,QAAQ;AACvB,2CAAY,MAAM;AAClB,eAAa;AACd;;;ACAO,SAAS,kCAAkC;AACjD,QAAM,QAAQ,IAAI,MAAM;AAAA;AAAA,qDAA4L;AAEpN,QAAM,OAAO;AAEb,QAAM;AACP;AAMO,SAAS,gBAAgB;AAC/B,QAAM,QAAQ,IAAI,MAAM;AAAA;AAAA,mCAAiH;AAEzI,QAAM,OAAO;AAEb,QAAM;AACP;AAMO,SAAS,kBAAkB;AACjC,QAAM,QAAQ,IAAI,MAAM;AAAA;AAAA,qCAAkJ;AAE1K,QAAM,OAAO;AAEb,QAAM;AACP;AAgDO,SAAS,cAAc;AAC7B,QAAM,QAAQ,IAAI,MAAM;AAAA;AAAA,iCAAoJ;AAE5K,QAAM,OAAO;AAEb,QAAM;AACP;AAmBO,SAAS,0BAA0B;AACzC,QAAM,QAAQ,IAAI,MAAM;AAAA;AAAA,6CAA8G;AAEtI,QAAM,OAAO;AAEb,QAAM;AACP;;;AChHO,IAAI,cAAc;AAGlB,SAAS,gBAAgB,GAAG;AAClC,gBAAc;AACf;AA+DO,SAAS,KAAK,IAAI;AAzEzB;AA0EC,gBAAc,EAAE,GAAG,aAAa,GAAG,MAAM,GAAG,KAAK;AAEjD,MAAI,cAAK;AACR,gBAAY,WAAW;AACvB,gBAAY,WAAU,iBAAY,MAAZ,mBAAe;AAAA,EACtC;AACD;AAEO,SAAS,MAAM;AACrB;AAAA,EAAyC,YAAa;AACvD;AA6BA,eAAsB,KAAK,SAAS;AACnC,MAAI,mBAAmB;AACvB,MAAI,QAAQ,MAAM;AAElB,SAAO,MAAM;AACZ,kBAAc;AACd,WAAO;AAAA,EACR;AACD;;;ACrHA,IAAI,OAAO;AACX,IAAI,SAAS;AAUN,SAAS,sBAAsB,KAAK,OAAO;AACjD,MAAI,cAAK;AACR,YAAQ;AAAA,MACP;AAAA,sCAAyE,GAAG;AAAA;AAAA;AAAA,EAG7E,KAAK;AAAA;AAAA,MACJ;AAAA,MACA;AAAA,IACD;AAAA,EACD,OAAO;AACN,YAAQ,KAAK,4CAA4C;AAAA,EAC1D;AACD;;;ACpBA,IAAI,iBAAiB;AAGrB,IAAI,UAAU;AAGP,SAAS,qBAAqB;AACpC,QAAM,QAAQ,YAAW,2BAAK;AAE9B,MAAI,CAAC,OAAO;AACX,IAAE,wBAAwB;AAAA,EAC3B;AAEA,SAAO;AACR;AAOA,eAAsB,oBAAoB,IAAI;AAC7C,YAAU;AAAA,IACT,YAAY;AAAA,MACX,QAAQ,oBAAI,IAAI;AAAA,MAChB,aAAa,CAAC;AAAA,MACd,qBAAqB,oBAAI,IAAI;AAAA,IAC9B;AAAA,EACD;AAEA,MAAI,gBAAgB,GAAG;AACtB,UAAM,EAAE,SAAS,QAAQ,IAAI,SAAS;AACtC,UAAM,kBAAkB;AACxB,qBAAiB;AACjB,UAAM;AACN,WAAO,GAAG,EAAE,QAAQ,OAAO;AAAA,EAC5B;AAEA,MAAI;AACH,QAAI,QAAQ,MAAM;AACjB,MAAE,gCAAgC;AAAA,IACnC;AACA,WAAO,IAAI,IAAI,SAAS,EAAE;AAAA,EAC3B,UAAE;AACD,cAAU;AAAA,EACX;AACD;AAGA,IAAI,MAAM;AAEV,IAAI,aAAa;AAMV,SAAS,sBAAsB;AAOrC,8BAAe,OAAO,gCAAkB,EACtC,KAAK,CAAC,UAAU;AAChB,UAAM,IAAI,MAAM,kBAAkB;AAAA,EACnC,CAAC,EACA,KAAK,MAAM,IAAI;AACjB,SAAO;AACR;AAGA,SAAS,kBAAkB;AAjF3B;AAoFC,SAAO,CAAC,GAAC,sBAAW,YAAX,mBAAoB,aAApB,mBAA8B;AACxC;;;ACnFA,IAAI;AAEJ,IAAI;AAGJ,eAAsB,OAAO,MAAM;AAPnC;AAQC,kCAAiB,IAAI,YAAY;AAGjC,wBAAW,sBAAW,WAAX,mBAAmB,WAAnB,mBAA2B,UACnC,WAAW;AAAA;AAAA,KAEX,MAAM,OAAO,2BAAa,GAAG;AAAA;AAEhC,QAAM,cAAc,MAAM,OAAO,OAAO,OAAO,WAAW,aAAa,OAAO,IAAI,CAAC;AAEnF,SAAO,cAAc,WAAW;AACjC;AAMO,SAAS,cAAc,OAAO;AAGpC,MAAI,CAAC,gBAAW,WAAW,QAAQ;AAElC,WAAO,WAAW,OAAO,KAAK,KAAK,EAAE,SAAS,QAAQ;AAAA,EACvD;AAEA,MAAI,SAAS;AAEb,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,cAAU,OAAO,aAAa,MAAM,CAAC,CAAC;AAAA,EACvC;AAEA,SAAO,KAAK,MAAM;AACnB;;;ACvCO,IAAM,UAAU;AAAA,EACtB,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAM;AAAA,EACN,UAAU;AAAA,EACV,UAAU;AACX;AAEO,IAAM,eAAN,cAA2B,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOvC,YAAY,SAAS,MAAM,OAAO,MAAM;AACvC,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,SAAK,OAAO,KAAK,KAAK,EAAE;AACxB,SAAK,QAAQ;AACb,SAAK,OAAO;AAAA,EACb;AACD;AAGO,SAAS,aAAa,OAAO;AACnC,SAAO,OAAO,KAAK,MAAM;AAC1B;AAEA,IAAM,qBAAqC,OAAO;AAAA,EACjD,OAAO;AACR,EACE,KAAK,EACL,KAAK,IAAI;AAGJ,SAAS,gBAAgB,OAAO;AACtC,QAAM,QAAQ,OAAO,eAAe,KAAK;AAEzC,SACC,UAAU,OAAO,aACjB,UAAU,QACV,OAAO,eAAe,KAAK,MAAM,QACjC,OAAO,oBAAoB,KAAK,EAAE,KAAK,EAAE,KAAK,IAAI,MAAM;AAE1D;AAGO,SAAS,SAAS,OAAO;AAC/B,SAAO,OAAO,UAAU,SAAS,KAAK,KAAK,EAAE,MAAM,GAAG,EAAE;AACzD;AAGA,SAAS,iBAAiB,MAAM;AAC/B,UAAQ,MAAM;AAAA,IACb,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR,KAAK;AACJ,aAAO;AAAA,IACR;AACC,aAAO,OAAO,MACX,MAAM,KAAK,WAAW,CAAC,EAAE,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC,KACtD;AAAA,EACL;AACD;AAGO,SAAS,iBAAiB,KAAK;AACrC,MAAI,SAAS;AACb,MAAI,WAAW;AACf,QAAM,MAAM,IAAI;AAEhB,WAAS,IAAI,GAAG,IAAI,KAAK,KAAK,GAAG;AAChC,UAAM,OAAO,IAAI,CAAC;AAClB,UAAM,cAAc,iBAAiB,IAAI;AACzC,QAAI,aAAa;AAChB,gBAAU,IAAI,MAAM,UAAU,CAAC,IAAI;AACnC,iBAAW,IAAI;AAAA,IAChB;AAAA,EACD;AAEA,SAAO,IAAI,aAAa,IAAI,MAAM,SAAS,IAAI,MAAM,QAAQ,CAAC;AAC/D;AAGO,SAAS,mBAAmB,QAAQ;AAC1C,SAAO,OAAO,sBAAsB,MAAM,EAAE;AAAA,IAC3C,CAAC,WAAW,OAAO,yBAAyB,QAAQ,MAAM,EAAE;AAAA,EAC7D;AACD;AAEA,IAAM,gBAAgB;AAGf,SAAS,cAAc,KAAK;AAClC,SAAO,cAAc,KAAK,GAAG,IAAI,MAAM,MAAM,MAAM,KAAK,UAAU,GAAG,IAAI;AAC1E;;;AC1GA,IAAM,QAAQ;AACd,IAAM,eAAe;AACrB,IAAM,WACL;AAOM,SAAS,OAAO,OAAO,UAAU;AACvC,QAAM,SAAS,oBAAI,IAAI;AAGvB,QAAM,OAAO,CAAC;AAEd,QAAM,SAAS,oBAAI,IAAI;AAGvB,WAAS,KAAK,OAAO;AACpB,QAAI,CAAC,aAAa,KAAK,GAAG;AACzB,UAAI,OAAO,IAAI,KAAK,GAAG;AACtB,eAAO,IAAI,OAAO,OAAO,IAAI,KAAK,IAAI,CAAC;AACvC;AAAA,MACD;AAEA,aAAO,IAAI,OAAO,CAAC;AAEnB,UAAI,UAAU;AACb,cAAMA,OAAM,SAAS,OAAO,CAACC,WAAU,OAAOA,QAAO,QAAQ,CAAC;AAE9D,YAAI,OAAOD,SAAQ,UAAU;AAC5B,iBAAO,IAAI,OAAOA,IAAG;AACrB;AAAA,QACD;AAAA,MACD;AAEA,UAAI,OAAO,UAAU,YAAY;AAChC,cAAM,IAAI,aAAa,+BAA+B,MAAM,OAAO,KAAK;AAAA,MACzE;AAEA,YAAM,OAAO,SAAS,KAAK;AAE3B,cAAQ,MAAM;AAAA,QACb,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ;AAAA,QAED,KAAK;AACiB,UAAC,MAAO,QAAQ,CAACC,QAAO,MAAM;AAClD,iBAAK,KAAK,IAAI,CAAC,GAAG;AAClB,iBAAKA,MAAK;AACV,iBAAK,IAAI;AAAA,UACV,CAAC;AACD;AAAA,QAED,KAAK;AACJ,gBAAM,KAAK,KAAK,EAAE,QAAQ,IAAI;AAC9B;AAAA,QAED,KAAK;AACJ,qBAAW,CAAC,KAAKA,MAAK,KAAK,OAAO;AACjC,iBAAK;AAAA,cACJ,QAAQ,aAAa,GAAG,IAAI,oBAAoB,GAAG,IAAI,KAAK;AAAA,YAC7D;AACA,iBAAKA,MAAK;AACV,iBAAK,IAAI;AAAA,UACV;AACA;AAAA,QAED,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,MAAM,MAAM;AACjB;AAAA,QAED,KAAK;AACJ;AAAA,QAED,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ;AAAA,QAED;AACC,cAAI,CAAC,gBAAgB,KAAK,GAAG;AAC5B,kBAAM,IAAI;AAAA,cACT;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,YACD;AAAA,UACD;AAEA,cAAI,mBAAmB,KAAK,EAAE,SAAS,GAAG;AACzC,kBAAM,IAAI;AAAA,cACT;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,YACD;AAAA,UACD;AAEA,qBAAW,OAAO,OAAO;AACxB,iBAAK,KAAK,cAAc,GAAG,CAAC;AAC5B,iBAAK,MAAM,GAAG,CAAC;AACf,iBAAK,IAAI;AAAA,UACV;AAAA,MACF;AAAA,IACD;AAAA,EACD;AAEA,OAAK,KAAK;AAEV,QAAM,QAAQ,oBAAI,IAAI;AAEtB,QAAM,KAAK,MAAM,EACf,OAAO,CAAC,UAAU,MAAM,CAAC,IAAI,CAAC,EAC9B,KAAK,CAAC,GAAG,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,EAC1B,QAAQ,CAAC,OAAO,MAAM;AACtB,UAAM,IAAI,MAAM,CAAC,GAAG,SAAS,CAAC,CAAC;AAAA,EAChC,CAAC;AAMF,WAASC,WAAU,OAAO;AACzB,QAAI,MAAM,IAAI,KAAK,GAAG;AACrB,aAAO,MAAM,IAAI,KAAK;AAAA,IACvB;AAEA,QAAI,aAAa,KAAK,GAAG;AACxB,aAAO,oBAAoB,KAAK;AAAA,IACjC;AAEA,QAAI,OAAO,IAAI,KAAK,GAAG;AACtB,aAAO,OAAO,IAAI,KAAK;AAAA,IACxB;AAEA,UAAM,OAAO,SAAS,KAAK;AAE3B,YAAQ,MAAM;AAAA,MACb,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACJ,eAAO,UAAUA,WAAU,MAAM,QAAQ,CAAC,CAAC;AAAA,MAE5C,KAAK;AACJ,eAAO,cAAc,iBAAiB,MAAM,MAAM,CAAC,MAClD,MAAM,KACP;AAAA,MAED,KAAK;AACJ,eAAO,YAAY,MAAM,QAAQ,CAAC;AAAA,MAEnC,KAAK;AACJ,eAAO,WAAW,iBAAiB,MAAM,SAAS,CAAC,CAAC;AAAA,MAErD,KAAK;AACJ,eAAO,uBAAuB,iBAAiB,MAAM,SAAS,CAAC,CAAC;AAAA,MAEjE,KAAK;AACJ,cAAM;AAAA;AAAA,UAAgC,MAAO;AAAA,YAAI,CAAC,GAAG,MACpD,KAAK,QAAQA,WAAU,CAAC,IAAI;AAAA,UAC7B;AAAA;AACA,cAAM,OAAO,MAAM,WAAW,KAAK,MAAM,SAAS,KAAK,QAAQ,KAAK;AACpE,eAAO,IAAI,QAAQ,KAAK,GAAG,CAAC,GAAG,IAAI;AAAA,MAEpC,KAAK;AAAA,MACL,KAAK;AACJ,eAAO,OAAO,IAAI,KAAK,MAAM,KAAK,KAAK,EAAE,IAAIA,UAAS,EAAE,KAAK,GAAG,CAAC;AAAA,MAElE,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK,kBAAkB;AACtB,YAAIF,OAAM,OAAO,IAAI;AAErB,YAAI,OAAO,IAAI,MAAM,MAAM,MAAM,GAAG;AACnC,gBAAM,QAAQ,IAAI,MAAM,YAAY,MAAM,MAAM;AAChD,UAAAA,QAAO,KAAK,KAAK;AAAA,QAClB,OAAO;AACN,UAAAA,QAAO,KAAKE,WAAU,MAAM,MAAM,CAAC;AAAA,QACpC;AAEA,cAAM,IAAI,MAAM;AAChB,cAAM,IAAI,IAAI,MAAM;AAGpB,YAAI,IAAI,KAAK,MAAM,MAAM,OAAO,YAAY;AAC3C,gBAAM,IAAI,CAAC,QAAQ,KAAK,IAAI,EAAE,CAAC,IAAI;AACnC,UAAAF,QAAO,aAAa,IAAI,CAAC,IAAI,IAAI,CAAC;AAAA,QACnC;AAEA,eAAOA;AAAA,MACR;AAAA,MAEA,KAAK,eAAe;AACnB,cAAM,MAAM,IAAI,WAAW,KAAK;AAChC,eAAO,mBAAmB,IAAI,SAAS,CAAC;AAAA,MACzC;AAAA,MAEA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACJ,eAAO,GAAG,IAAI,SAAS,iBAAiB,MAAM,SAAS,CAAC,CAAC;AAAA,MAE1D;AACC,cAAMG,QAAO,OAAO,KAAK,KAAK;AAC9B,cAAM,MAAMA,MACV,IAAI,CAAC,QAAQ,GAAG,SAAS,GAAG,CAAC,IAAID,WAAU,MAAM,GAAG,CAAC,CAAC,EAAE,EACxD,KAAK,GAAG;AACV,cAAM,QAAQ,OAAO,eAAe,KAAK;AACzC,YAAI,UAAU,MAAM;AACnB,iBAAOC,MAAK,SAAS,IAClB,IAAI,GAAG,qBACP;AAAA,QACJ;AAEA,eAAO,IAAI,GAAG;AAAA,IAChB;AAAA,EACD;AAEA,QAAM,MAAMD,WAAU,KAAK;AAE3B,MAAI,MAAM,MAAM;AAEf,UAAM,SAAS,CAAC;AAGhB,UAAM,aAAa,CAAC;AAGpB,UAAM,SAAS,CAAC;AAEhB,UAAM,QAAQ,CAAC,MAAM,UAAU;AAC9B,aAAO,KAAK,IAAI;AAEhB,UAAI,OAAO,IAAI,KAAK,GAAG;AACtB,eAAO;AAAA;AAAA,UAA4B,OAAO,IAAI,KAAK;AAAA,QAAE;AACrD;AAAA,MACD;AAEA,UAAI,aAAa,KAAK,GAAG;AACxB,eAAO,KAAK,oBAAoB,KAAK,CAAC;AACtC;AAAA,MACD;AAEA,YAAM,OAAO,SAAS,KAAK;AAE3B,cAAQ,MAAM;AAAA,QACb,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,iBAAO,KAAK,UAAUA,WAAU,MAAM,QAAQ,CAAC,CAAC,GAAG;AACnD;AAAA,QAED,KAAK;AACJ,iBAAO,KAAK,MAAM,SAAS,CAAC;AAC5B;AAAA,QAED,KAAK;AACJ,iBAAO,KAAK,YAAY,MAAM,QAAQ,CAAC,GAAG;AAC1C;AAAA,QAED,KAAK;AACJ,iBAAO,KAAK,SAAS,MAAM,MAAM,GAAG;AACf,UAAC,MAAO,QAAQ,CAAC,GAAG,MAAM;AAC9C,uBAAW,KAAK,GAAG,IAAI,IAAI,CAAC,KAAKA,WAAU,CAAC,CAAC,EAAE;AAAA,UAChD,CAAC;AACD;AAAA,QAED,KAAK;AACJ,iBAAO,KAAK,SAAS;AACrB,qBAAW;AAAA,YACV,GAAG,IAAI,IAAI,MAAM,KAAK,KAAK,EACzB,IAAI,CAAC,MAAM,OAAOA,WAAU,CAAC,CAAC,GAAG,EACjC,KAAK,GAAG,CAAC;AAAA,UACZ;AACA;AAAA,QAED,KAAK;AACJ,iBAAO,KAAK,SAAS;AACrB,qBAAW;AAAA,YACV,GAAG,IAAI,IAAI,MAAM,KAAK,KAAK,EACzB,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,OAAOA,WAAU,CAAC,CAAC,KAAKA,WAAU,CAAC,CAAC,GAAG,EACvD,KAAK,GAAG,CAAC;AAAA,UACZ;AACA;AAAA,QAED,KAAK;AACJ,iBAAO;AAAA,YACN,mBAAmB,IAAI,WAAW,KAAK,EAAE,KAAK,GAAG,CAAC;AAAA,UACnD;AACA;AAAA,QAED;AACC,iBAAO;AAAA,YACN,OAAO,eAAe,KAAK,MAAM,OAAO,wBAAwB;AAAA,UACjE;AACA,iBAAO,KAAK,KAAK,EAAE,QAAQ,CAAC,QAAQ;AACnC,uBAAW;AAAA,cACV,GAAG,IAAI,GAAG,UAAU,GAAG,CAAC,IAAIA,WAAU,MAAM,GAAG,CAAC,CAAC;AAAA,YAClD;AAAA,UACD,CAAC;AAAA,MACH;AAAA,IACD,CAAC;AAED,eAAW,KAAK,UAAU,GAAG,EAAE;AAE/B,WAAO,aAAa,OAAO,KAAK,GAAG,CAAC,KAAK,WAAW;AAAA,MACnD;AAAA,IACD,CAAC,KAAK,OAAO,KAAK,GAAG,CAAC;AAAA,EACvB,OAAO;AACN,WAAO;AAAA,EACR;AACD;AAGA,SAAS,SAAS,KAAK;AACtB,MAAI,OAAO;AAEX,KAAG;AACF,WAAO,MAAM,MAAM,MAAM,MAAM,IAAI;AACnC,UAAM,CAAC,EAAE,MAAM,MAAM,UAAU;AAAA,EAChC,SAAS,OAAO;AAEhB,SAAO,SAAS,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM;AAC3C;AAGA,SAAS,mBAAmB,GAAG;AAC9B,SAAO,QAAQ,CAAC,KAAK;AACtB;AAGA,SAAS,oBAAoB,KAAK;AACjC,SAAO,IAAI,QAAQ,cAAc,kBAAkB;AACpD;AAGA,SAAS,SAAS,KAAK;AACtB,SAAO,6BAA6B,KAAK,GAAG,IACzC,MACA,oBAAoB,KAAK,UAAU,GAAG,CAAC;AAC3C;AAGA,SAAS,UAAU,KAAK;AACvB,SAAO,6BAA6B,KAAK,GAAG,IACzC,IAAI,GAAG,KACP,IAAI,oBAAoB,KAAK,UAAU,GAAG,CAAC,CAAC;AAChD;AAGA,SAAS,oBAAoB,OAAO;AACnC,MAAI,OAAO,UAAU,SAAU,QAAO,iBAAiB,KAAK;AAC5D,MAAI,UAAU,OAAQ,QAAO;AAC7B,MAAI,UAAU,KAAK,IAAI,QAAQ,EAAG,QAAO;AACzC,QAAM,MAAM,OAAO,KAAK;AACxB,MAAI,OAAO,UAAU,SAAU,QAAO,IAAI,QAAQ,YAAY,KAAK;AACnE,MAAI,OAAO,UAAU,SAAU,QAAO,QAAQ;AAC9C,SAAO;AACR;;;ACtZA;AA8BO,IAAM,YAAN,MAAM,UAAS;AAAA;AAAA;AAAA;AAAA;AAAA,EAsDrB,YAAY,QAAQ,QAAQ;AAtDtB;AAKN;AAAA;AAAA;AAAA;AAAA,6BAAO,CAAC;AAMR;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA,2CAAqB;AAMrB;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOC,uBAAK,SAAU;AAEf,SAAK,SAAS;AACd,SAAK,QAAQ,SAAS,EAAE,GAAG,OAAO,MAAM,IAAI,EAAE,cAAc,OAAU;AACtE,SAAK,OAAO,SAAS,OAAO,OAAO;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,KAAK,IAAI;AACR,UAAME,QAAO,IAAI,UAAS,KAAK,QAAQ,IAAI;AAC3C,IAAAA,MAAK,OAAO;AAEZ,uBAAK,MAAK,KAAKA,KAAI;AACnB,IAAAA,MAAK,MAAM,EAAE;AAAA,EACd;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,UAAU,IAAI;AACzB,uBAAK,MAAK,KAAK,UAAU;AACzB,SAAK,MAAM,UAAU,EAAE;AACvB,uBAAK,MAAK,KAAK,WAAW;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,UAAU,IAAI;AACnB,QAAI,WAAW;AAEf,QAAI,SAAS,SAAS,GAAG;AACxB,YAAMC,WAAU;AAEhB,iBAAW,CAAC,aAAa;AACxB,eAAO,QAAQ,IAAI,QAAQ,EAAE,KAAK,MAAM;AACvC,gBAAM,mBAAmB;AAEzB,cAAI;AACH,4BAAgBA,QAAO;AACvB,mBAAO,GAAG,QAAQ;AAAA,UACnB,UAAE;AACD,4BAAgB,gBAAgB;AAAA,UACjC;AAAA,QACD,CAAC;AAAA,MACF;AAAA,IACD;AAEA,SAAK,MAAM,QAAQ;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,QAAQ;AACX,UAAMA,WAAU;AAEhB,QAAI,UAAU,QAAQ,QAAQ,OAAO,CAAC,EAAE,CAAC;AACzC,UAAM,WAAW,CAAC,OAAO;AAEzB,eAAW,MAAM,OAAO,MAAM,CAAC,GAAG;AACjC,gBAAU,QAAQ,KAAK,MAAM;AAC5B,cAAM,mBAAmB;AACzB,wBAAgBA,QAAO;AAEvB,YAAI;AACH,iBAAO,GAAG;AAAA,QACX,UAAE;AACD,0BAAgB,gBAAgB;AAAA,QACjC;AAAA,MACD,CAAC;AAED,eAAS,KAAK,OAAO;AAAA,IACtB;AAEA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,MAAM,IAAI;AACT,UAAM,QAAQ,IAAI,UAAS,KAAK,QAAQ,IAAI;AAC5C,uBAAK,MAAK,KAAK,KAAK;AAEpB,UAAM,SAAS;AAEf,oBAAgB;AAAA,MACf,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,IACJ,CAAC;AAED,UAAM,SAAS,GAAG,KAAK;AAEvB,oBAAgB,MAAM;AAEtB,QAAI,kBAAkB,SAAS;AAC9B,UAAI,MAAM,OAAO,SAAS,QAAQ;AACjC,QAAE,cAAc;AAAA,MACjB;AAEA,aAAO,MAAM,MAAM;AAAA,MAAC,CAAC;AACrB,YAAM,UAAU;AAAA,IACjB;AAEA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,UAAU,IAAI,cAAc;AAC3B,SAAK,YAAY;AACjB,UAAM,QAAQ,KAAK,MAAM,EAAE;AAC3B,wBAAM,oBAAqB;AAC3B,QAAI;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,OAAO,OAAO,IAAI,UAAU,SAAS,QAAQ,OAAO,SAAS;AAC5D,UAAM,EAAE,OAAO,GAAG,aAAa,IAAI;AAEnC,SAAK,KAAK,UAAU,WAAW,cAAc,UAAU,SAAS,QAAQ,KAAK,CAAC,GAAG;AACjF,SAAK,MAAM,CAAC,aAAa;AACxB,eAAS,MAAM,eAAe;AAC9B,SAAG,QAAQ;AAAA,IACZ,CAAC;AACD,SAAK,KAAK,GAAG,UAAU,QAAQ,EAAE,WAAW;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,OAAO,OAAO,MAAM,UAAU,SAAS,QAAQ,OAAO,SAAS;AAC9D,uBAAK,MAAK,KAAK,UAAU,WAAW,OAAO,UAAU,SAAS,QAAQ,KAAK,CAAC,EAAE;AAO9E,UAAM,QAAQ,CAAC,UAAU,OAAO,EAAE,MAAAD,OAAM,MAAAE,MAAK,MAAM;AAClD,UAAI,WAAW,OAAO;AACrB,gBAAQ,MAAM;AAAA,MACf;AAEA,UAAI,UAAU,KAAK,MAAM,cAAc;AACtC,+BAAS,MAAK,KAAK,WAAW;AAAA,MAC/B;AAEA,6BAAS,MAAK,KAAK,IAAIA,KAAI,GAAG,UAAU,QAAQ,EAAE,WAAW;AAG7D,UAAIF,OAAM;AACT,iBAAS,KAAK,CAAC,UAAU,MAAM,KAAKA,KAAI,CAAC;AAAA,MAC1C;AAAA,IACD;AAEA,QAAI,OAAO,SAAS,YAAY;AAC/B,WAAK,MAAM,CAAC,aAAa;AA/Q5B;AAgRI,cAAM,IAAI,IAAI,UAAS,KAAK,QAAQ,IAAI;AACxC,aAAK,CAAC;AAEN,YAAI,KAAK,OAAO,SAAS,SAAS;AACjC,iBAAO,wBAAE,+CAAF,SAA2B,KAAK,CAAC,YAAY;AACnD,kBAAM,UAAU,QAAQ,KAAK,WAAW,WAAW,EAAE,GAAG,OAAO;AAAA,UAChE,CAAC;AAAA,QACF,OAAO;AACN,gBAAM,UAAU,wBAAE,yCAAF;AAChB,gBAAM,UAAU,QAAQ,KAAK,WAAW,WAAW,EAAE,GAAG,OAAO;AAAA,QAChE;AAAA,MACD,CAAC;AAAA,IACF,OAAO;AACN,YAAM,MAAM,MAAM,EAAE,KAAK,CAAC;AAAA,IAC3B;AAAA,EACD;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,IAAI;AACT,UAAM,OAAO,KAAK,SAAS;AAG3B,UAAM,QAAQ,CAACA,UAAS;AACvB,WAAK,OAAO,UAAUA,OAAM,IAAI;AAAA,IACjC;AAEA,SAAK,MAAM,CAAC,aAAa;AA5S3B;AA6SG,YAAM,IAAI,IAAI,UAAS,SAAS,QAAQ,QAAQ;AAChD,SAAG,CAAC;AAEJ,UAAI,SAAS,OAAO,SAAS,SAAS;AACrC,eAAO,wBAAE,+CAAF,SAA2B,KAAK,CAAC,YAAY;AACnD,gBAAM,QAAQ,IAAI;AAAA,QACnB,CAAC;AAAA,MACF,OAAO;AACN,cAAM,UAAU,wBAAE,yCAAF;AAChB,cAAM,QAAQ,IAAI;AAAA,MACnB;AAAA,IACD,CAAC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,KAAK,SAAS;AACb,QAAI,OAAO,YAAY,YAAY;AAClC,WAAK,MAAM,OAAO,aAAa,SAAS,KAAK,MAAM,QAAQ,CAAC,CAAC;AAAA,IAC9D,OAAO;AACN,yBAAK,MAAK,KAAK,OAAO;AAAA,IACvB;AAAA,EACD;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,IAAI;AACd,KAAC,mBAAK,gBAAL,mBAAK,aAAgB,CAAC,IAAG,KAAK,EAAE;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW;AACV,WAAO,mBAAK,WAAU,CAAC,GAAG,mBAAK,SAAQ,SAAS,GAAG,gCAAK,UAAQ,MAAK,QAAQ,IAAI,CAAC,IAAI,CAAC;AAAA,EACxF;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO;AACN,UAAM,OAAO,IAAI,UAAS,KAAK,QAAQ,mBAAK,QAAO;AACnD,uBAAK,MAAO,mBAAK,MAAK,IAAI,CAAC,SAAU,gBAAgB,YAAW,KAAK,KAAK,IAAI,IAAK;AACnF,SAAK,UAAU,KAAK;AACpB,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ,OAAO;AACd,QAAI,KAAK,OAAO,SAAS,MAAM,OAAO,MAAM;AAC3C,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAEA,SAAK,QAAQ,MAAM;AACnB,uBAAK,MAAO,oBAAM,MAAK,IAAI,CAAC,SAAS;AACpC,UAAI,gBAAgB,WAAU;AAC7B,aAAK,QAAQ,IAAI;AAAA,MAClB;AACA,aAAO;AAAA,IACR,CAAC;AACD,SAAK,UAAU,MAAM;AACrB,SAAK,OAAO,MAAM;AAAA,EACnB;AAAA,EAEA,IAAI,SAAS;AACZ,WAAO,mBAAK,MAAK;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,OAAO,OAAO,WAAW,UAAU,CAAC,GAAG;AAEtC,QAAI;AAEJ,QAAI;AAEJ,UAAM;AAAA;AAAA,MAAsC,CAAC;AAAA;AAG7C,WAAO,iBAAiB,QAAQ;AAAA,MAC/B,MAAM;AAAA,QACL,KAAK,MAAM;AA3Yf;AA4YK,kBAAQ,gBAAS,gCAAS,6BAAT,SAAiB,WAAW,WAAU;AAAA,QACxD;AAAA,MACD;AAAA,MACA,MAAM;AAAA,QACL,KAAK,MAAM;AAhZf;AAiZK,kBAAQ,gBAAS,gCAAS,6BAAT,SAAiB,WAAW,WAAU;AAAA,QACxD;AAAA,MACD;AAAA,MACA,MAAM;AAAA,QACL,KAAK,MAAM;AArZf;AAsZK,kBAAQ,gBAAS,gCAAS,6BAAT,SAAiB,WAAW,WAAU;AAAA,QACxD;AAAA,MACD;AAAA,MACA,QAAQ;AAAA,QACP,OAAO;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,MACD;AAAA,MACA,MAAM;AAAA,QACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASC,CAAC,aAAa,eAAe;AAxalC;AAyaM,gBAAI,CAAC,iBAAiB;AACrB,oBAAMG,UAAU,gBAAS,gCAAS,6BAAT,SAAiB,WAAW;AACrD,oBAAM,cAAc,YAAY;AAAA,gBAC/B,MAAMA,QAAO;AAAA,gBACb,MAAMA,QAAO;AAAA,gBACb,MAAMA,QAAO;AAAA,gBACb,QAAQ,EAAE,QAAQ,CAAC,EAAE;AAAA,cACtB,CAAC;AACD,qBAAO,QAAQ,QAAQ,WAAW;AAAA,YACnC;AACA,8BAAU,oBAAoB,EAAE;AAAA,cAAK,MACpC,oBAAoB,MAAG;AApb9B,oBAAAC;AAobiC,uCAAAA,MAAA,WAAS,mCAAT,KAAAA,KAAuB,WAAW;AAAA,eAAQ;AAAA,YACrE;AACA,mBAAO,MAAM,KAAK,CAACD,YAAW;AAC7B,qBAAO,eAAeA,SAAQ,QAAQ;AAAA;AAAA,gBAErC,KAAK,MAAM;AACV,kBAAE,gBAAgB;AAAA,gBACnB;AAAA,cACD,CAAC;AACD,qBAAO;AAAA;AAAA,gBAA6CA;AAAA,cAAO;AAAA,YAC5D,GAAG,UAAU;AAAA,UACd;AAAA;AAAA,MACF;AAAA,IACD,CAAC;AAED,WAAO;AAAA,EACR;AAiQD;AAlqBC;AAMA;AAMA;AASA;AA1BM;AAgbL,wBAAmB,aAAG;AA9cxB;AA+cE,aAAW,aAAa,sBAAK,6CAAL,YAA6B;AACpD,WAAO,gCAAU,2CAAV;AAAA,EACR;AACD;AAMC,yBAAoB,aAAG;AAxdzB;AAydE,aAAW,SAAS,mBAAK,OAAM;AAC9B,QAAI,OAAO,UAAU,UAAU;AAC9B,aAAO,4BAAM,6CAAN;AAAA,IACR;AAAA,EACD;AACA,MAAI,mBAAK,qBAAoB;AAC5B,UAAM;AAAA,EACP;AACD;AAKC,uBAAkB,aAAG;AAtevB;AAueE,MAAI,mBAAK,cAAa;AACrB,eAAW,MAAM,mBAAK,cAAa;AAClC,YAAM;AAAA,IACP;AAAA,EACD;AACA,aAAW,SAAS,mBAAK,OAAM;AAC9B,QAAI,iBAAiB,aAAY,CAAC,oBAAM,qBAAoB;AAC3D,aAAO,4BAAM,2CAAN;AAAA,IACR;AAAA,EACD;AACD;AAndM;AA6dC,YAAO,SAAC,WAAW,SAAS;AA3fpC;AA4fE,MAAI,mBAAmB;AACvB,MAAI;AACH,UAAM,WAAW,gCAAS,kCAAT,SAAsB,QAAQ,WAAW;AAE1D,UAAM,UAAU,+BAAS,yCAAT;AAChB,WAAO,gCAAS,mCAAT,SAAuB,SAAS;AAAA,EACxC,UAAE;AACD,UAAM;AACN,oBAAgB,gBAAgB;AAAA,EACjC;AACD;AAUa,kBAAa,eAAC,WAAW,SAAS;AAhhBhD;AAihBE,QAAM,mBAAmB;AAEzB,MAAI;AACH,UAAM,WAAW,gCAAS,kCAAT,SAAsB,SAAS,WAAW;AAC3D,UAAM,UAAU,MAAM,+BAAS,+CAAT;AACtB,UAAM,cAAc,MAAM,+BAAS,6CAAT;AAC1B,QAAI,gBAAgB,MAAM;AACzB,cAAQ,OAAO,cAAc,QAAQ;AAAA,IACtC;AACA,WAAO,gCAAS,mCAAT,SAAuB,SAAS;AAAA,EACxC,UAAE;AACD,oBAAgB,gBAAgB;AAChC,UAAM;AAAA,EACP;AACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,qBAAgB,SAAC,UAAU,EAAE,MAAM,IAAI,MAAM,GAAG,GAAG;AAtiBpD;AAuiBE,aAAW,QAAQ,mBAAK,OAAM;AAC7B,QAAI,OAAO,SAAS,UAAU;AAC7B,cAAQ,KAAK,IAAI,KAAK;AAAA,IACvB,WAAW,gBAAgB,WAAU;AACpC,iCAAK,yCAAL,SAAsB;AAAA,IACvB;AAAA,EACD;AAEA,SAAO;AACR;AAOM,2BAAsB,eAAC,UAAU,EAAE,MAAM,IAAI,MAAM,GAAG,GAAG;AAvjBhE;AAwjBE,QAAM,KAAK;AAGX,aAAW,QAAQ,mBAAK,OAAM;AAC7B,QAAI,OAAO,SAAS,UAAU;AAC7B,cAAQ,KAAK,IAAI,KAAK;AAAA,IACvB,WAAW,gBAAgB,WAAU;AACpC,YAAM,2BAAK,+CAAL,SAA4B;AAAA,IACnC;AAAA,EACD;AAEA,SAAO;AACR;AAEM,yBAAoB,iBAAG;AAtkB9B;AAukBE,QAAM,MAAM,mBAAmB,EAAE;AAEjC,aAAW,CAAC,GAAG,GAAG,KAAK,IAAI,qBAAqB;AAG/C,IAAE,sBAAsB,OAAK,SAAI,OAAO,IAAI,GAAG,MAAlB,mBAAqB,UAAS,uBAAuB;AAAA,EACnF;AAEA,aAAW,cAAc,IAAI,aAAa;AAEzC,UAAM;AAAA,EACP;AAEA,SAAO,MAAM,sBAAK,0CAAL,WAAuB;AACrC;AASO,iBAAY,SAAC,MAAM,WAAW,SAAS;AAC7C,QAAM,WAAW,IAAI;AAAA,IACpB,IAAI,SAAS,MAAM,QAAQ,WAAW,QAAQ,WAAW,MAAM,IAAI,QAAQ,GAAG;AAAA,EAC/E;AAEA,WAAS,KAAK,UAAU;AAExB,MAAI,QAAQ,SAAS;AACpB,SAAK;AACqB,IAAC,YAAa,IAAI,QAAQ;AAC1B,IAAC,YAAa,IAAI;AAAA,EAC7C;AAGA,YAAU,UAAU,QAAQ,SAAS,CAAC,CAAC;AAEvC,MAAI,QAAQ,SAAS;AACpB,QAAI;AAAA,EACL;AAEA,WAAS,KAAK,WAAW;AAEzB,SAAO;AACR;AAOO,kBAAa,SAAC,SAAS,UAAU;AA5nBzC;AA6nBE,aAAW,WAAW,+BAAS,4CAAT,UAAgC;AACrD,YAAQ;AAAA,EACT;AAEA,MAAIH,QAAO,QAAQ,OAAO,SAAS,OAAO,UAAU;AACpD,MAAI,OAAO,QAAQ;AAEnB,aAAW,EAAE,MAAAK,OAAM,KAAK,KAAK,SAAS,OAAO,KAAK;AACjD,IAAAL,SAAQ,cAAcK,KAAI,KAAK,IAAI;AAAA,EACpC;AAEA,SAAO;AAAA,IACN,MAAAL;AAAA,IACA;AAAA,IACA,QAAQ;AAAA,MACP,QAAQ,SAAS,OAAO,IAAI;AAAA,IAC7B;AAAA,EACD;AACD;AAKM,sBAAiB,eAAC,KAAK;AAC5B,MAAI,IAAI,OAAO,SAAS,GAAG;AAC1B,WAAO;AAAA,EACR;AAEA,MAAI,UAAU,CAAC;AACf,MAAI,eAAe;AAEnB,aAAW,CAAC,GAAG,CAAC,KAAK,IAAI,QAAQ;AAChC,QAAI,EAAE,UAAU;AACf,qBAAe;AACf,iBAAW,KAAK,EAAE,SAAU,OAAM;AAAA,IACnC;AAEA,YAAQ,KAAK,IAAY,OAAO,CAAC,CAAC,IAAI,EAAE,UAAU,GAAG;AAAA,EACtD;AAEA,MAAI,UAAU;AAEd,MAAI,cAAc;AACjB,cAAU;AAAA,MACP,OAAO;AAAA,EACX;AAEA,QAAM,OAAO;AAAA;AAAA,MAET,OAAO;AAAA;AAAA;AAAA,OAGN,QAAQ,KAAK,UAAe,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAOlC,MAAI,WAAW;AACf,MAAI,KAAK,OAAO,IAAI,OAAO;AAC1B,eAAW,WAAW,KAAK,OAAO,IAAI,KAAK;AAAA,EAC5C,WAAW,KAAK,OAAO,IAAI,MAAM;AAIhC,UAAMK,QAAO,MAAM,OAAO,IAAI;AAC9B,SAAK,OAAO,IAAI,cAAc,KAAK,UAAUA,KAAI,EAAE;AAAA,EACpD;AAEA,SAAO;AAAA,WAAgB,QAAQ,IAAI,IAAI;AACxC;AAtqBM,aAAM,WAAN;AAAA,IAAM,WAAN;AA9BP;AAusBO,IAAM,WAAN,MAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBrB,YAAY,MAAM,YAAY,IAAI,MAAM,EAAE,MAAM,MAAM,GAAG;AAnBzD;AAAA;AAGA;AAAA;AAGA;AAAA;AAGA;AAAA,+BAAM,oBAAI,IAAI;AAGd;AAAA,+BAAS,EAAE,MAAM,CAAC,GAAG,OAAO,GAAG;AAQ9B,SAAK,OAAO;AACZ,SAAK,MAAM,EAAE,GAAG,KAAK,eAAe,CAAC,EAAE;AAEvC,QAAI,MAAM;AACV,SAAK,MAAM,MAAM,GAAG,SAAS,IAAI,KAAK;AAAA,EACvC;AAAA,EAEA,YAAY;AACX,WAAO,mBAAK,QAAO;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,UAAU,OAAO,MAAM;AACtB,UAAM,UAAU,mBAAK,QAAO;AAE5B,QAAI,IAAI;AACR,QAAI,IAAI,KAAK,IAAI,KAAK,QAAQ,QAAQ,MAAM;AAG5C,WAAO,IAAI,KAAK,KAAK,CAAC,MAAM,QAAQ,CAAC,EAAG,MAAK;AAE7C,QAAI,KAAK,CAAC,MAAM,OAAW;AAK3B,QAAI,QAAQ,CAAC,MAAM,UAAa,KAAK,CAAC,IAAI,QAAQ,CAAC,GAAG;AACrD,yBAAK,QAAO,OAAO;AACnB,yBAAK,QAAO,QAAQ;AAAA,IACrB;AAAA,EACD;AACD;AA5CC;;;AC/sBM,SAAS,KAAK,OAAO;AAC3B,MAAIC,QAAO,OAAO,SAAS,EAAE;AAC7B,MAAI,OAAO,eAAM,OAAO,KAAKA,KAAI,CAAC,QAAQ;AAC1C,SAAO,OAAOA,QAAO;AACtB;;;ACJA,IAAM,uBAAuB;AAAA;AAAA,EAE5B,IAAI,EAAE,QAAQ,CAAC,IAAI,EAAE;AAAA;AAAA,EAErB,IAAI,EAAE,YAAY,CAAC,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,EAAE;AAAA,EACjD,IAAI,EAAE,YAAY,CAAC,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,EAAE;AAAA,EACjD,GAAG;AAAA,IACF,YAAY;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EACA,IAAI,EAAE,YAAY,CAAC,MAAM,IAAI,EAAE;AAAA,EAC/B,IAAI,EAAE,YAAY,CAAC,MAAM,IAAI,EAAE;AAAA,EAC/B,UAAU,EAAE,YAAY,CAAC,UAAU,EAAE;AAAA,EACrC,QAAQ,EAAE,YAAY,CAAC,UAAU,UAAU,EAAE;AAAA,EAC7C,OAAO,EAAE,QAAQ,CAAC,SAAS,OAAO,EAAE;AAAA,EACpC,OAAO,EAAE,QAAQ,CAAC,SAAS,OAAO,EAAE;AAAA,EACpC,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAE;AAAA,EAC3B,IAAI,EAAE,QAAQ,CAAC,MAAM,OAAO,EAAE;AAAA,EAC9B,IAAI,EAAE,QAAQ,CAAC,MAAM,MAAM,IAAI,EAAE;AAAA,EACjC,IAAI,EAAE,QAAQ,CAAC,MAAM,MAAM,IAAI,EAAE;AAClC;AA2BA,IAAM,sBAAsB;AAAA,EAC3B,GAAG;AAAA;AAAA;AAAA;AAAA,EAIH,MAAM,EAAE,YAAY,CAAC,MAAM,EAAE;AAAA,EAC7B,GAAG,EAAE,YAAY,CAAC,GAAG,EAAE;AAAA,EACvB,QAAQ,EAAE,YAAY,CAAC,QAAQ,EAAE;AAAA,EACjC,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA,EACvD,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA,EACvD,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA,EACvD,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA,EACvD,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA,EACvD,IAAI,EAAE,YAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQvD,IAAI,EAAE,MAAM,CAAC,MAAM,MAAM,SAAS,UAAU,UAAU,EAAE;AAAA;AAAA,EAExD,OAAO,EAAE,MAAM,CAAC,MAAM,SAAS,UAAU,UAAU,EAAE;AAAA,EACrD,OAAO,EAAE,MAAM,CAAC,MAAM,SAAS,UAAU,UAAU,EAAE;AAAA,EACrD,OAAO,EAAE,MAAM,CAAC,MAAM,SAAS,UAAU,UAAU,EAAE;AAAA;AAAA,EAErD,UAAU,EAAE,MAAM,CAAC,OAAO,UAAU,EAAE;AAAA;AAAA,EAEtC,OAAO;AAAA,IACN,MAAM,CAAC,WAAW,YAAY,SAAS,SAAS,SAAS,SAAS,UAAU,UAAU;AAAA,EACvF;AAAA;AAAA,EAEA,MAAM;AAAA,IACL,MAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA;AAAA,EAEA,MAAM,EAAE,MAAM,CAAC,QAAQ,QAAQ,UAAU,EAAE;AAAA,EAC3C,UAAU,EAAE,MAAM,CAAC,OAAO,EAAE;AAAA,EAC5B,aAAa,EAAE,MAAM,CAAC,MAAM,EAAE;AAC/B;AAWO,SAAS,2BAA2B,WAAW,WAAW,WAAW,cAAc;AACzF,MAAI,UAAU,SAAS,GAAG,EAAG,QAAO;AAEpC,QAAM,eAAe,UAAU,UAAU,SAAS,CAAC;AACnD,QAAM,aAAa,oBAAoB,YAAY;AACnD,MAAI,CAAC,WAAY,QAAO;AAExB,MAAI,cAAc,cAAc,WAAW,UAAU;AACpD,aAAS,IAAI,UAAU,SAAS,GAAG,KAAK,GAAG,KAAK;AAC/C,YAAM,WAAW,UAAU,CAAC;AAC5B,UAAI,SAAS,SAAS,GAAG,EAAG,QAAO;AAGnC,UAAI,WAAW,SAAS,SAAS,UAAU,CAAC,CAAC,GAAG;AAC/C,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAEA,MAAI,gBAAgB,cAAc,WAAW,WAAW,SAAS,SAAS,GAAG;AAC5E,UAAM,QAAQ,YAAY,MAAM,SAAS,QAAQ,SAAS,MAAM,MAAM,SAAS;AAC/E,UAAM,WAAW,eACd,MAAM,YAAY,QAAQ,YAAY,MACtC,MAAM,YAAY;AAErB,WAAO,GAAG,KAAK,8BAA8B,QAAQ;AAAA,EACtD;AAEA,SAAO;AACR;AAWO,SAAS,yBAAyB,WAAW,YAAY,WAAW,YAAY;AACtF,MAAI,UAAU,SAAS,GAAG,MAAK,yCAAY,SAAS,MAAM,QAAO;AAEjE,MAAI,eAAe,WAAY,QAAO;AAEtC,QAAM,aAAa,oBAAoB,UAAU;AAEjD,QAAM,QAAQ,YAAY,MAAM,SAAS,QAAQ,SAAS,MAAM,MAAM,SAAS;AAC/E,QAAM,SAAS,aAAa,MAAM,UAAU,QAAQ,UAAU,MAAM,MAAM,UAAU;AAEpF,MAAI,YAAY;AACf,QAAI,YAAY,cAAc,WAAW,OAAO,SAAS,SAAS,GAAG;AACpE,aAAO,GAAG,KAAK,gCAAgC,MAAM;AAAA,IACtD;AAEA,QAAI,gBAAgB,cAAc,WAAW,WAAW,SAAS,SAAS,GAAG;AAC5E,aAAO,GAAG,KAAK,yBAAyB,MAAM;AAAA,IAC/C;AAEA,QAAI,UAAU,cAAc,WAAW,MAAM;AAC5C,UAAI,WAAW,KAAK,SAAS,SAAS,GAAG;AACxC,eAAO;AAAA,MACR,OAAO;AACN,eAAO,GAAG,KAAK,yBAAyB,MAAM,QAAQ,UAAU,mCAAmC,WAAW,KAAK,IAAI,CAAC,MAAM,MAAM,CAAC,KAAK,EAAE,KAAK,IAAI,CAAC;AAAA,MACvJ;AAAA,IACD;AAAA,EACD;AAMA,UAAQ,WAAW;AAAA,IAClB,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACJ,aAAO,GAAG,KAAK,yBAAyB,MAAM;AAAA,IAC/C,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACJ,aAAO,GAAG,KAAK,8CAA8C,MAAM;AAAA,IACpE,KAAK;AAAA,IACL,KAAK;AACJ,aAAO,GAAG,KAAK,2CAA2C,MAAM;AAAA,IACjE,KAAK;AACJ,aAAO,mFAAmF,MAAM;AAAA,EAClG;AAEA,SAAO;AACR;;;ACnNO,IAAI;AAMX,SAAS,YAAY,UAAU,SAAS;AACvC,YACC,+BAA+B,OAAO;AAAA;AAAA;AAGvC,OAAK,gBAAS,oBAAI,IAAI,IAAG,IAAI,OAAO,EAAG;AACvC,OAAK,IAAI,OAAO;AAGhB,UAAQ,MAAM,OAAO;AACrB,WAAS;AAAA,IAAK,CAAC,MACd,EAAE;AAAA;AAAA,MAED,yBAAyB,KAAK,UAAU,OAAO,EAAE,WAAW,MAAM,UAAU,CAAC;AAAA,IAC9E;AAAA,EACD;AACD;AAQO,SAAS,aAAa,UAAU,KAAK,MAAM,QAAQ;AACzD,MAAIC;AAAA;AAAA,IAAqC;AAAA;AACzC,MAAI,WAAWA,SAAQ,SAAS,QAAQ;AACxC,MAAI,SAASA,SAAQ;AACrB,MAAIC,WAAU,EAAE,KAAK,QAAQ,UAAU,MAAM,OAAO;AAEpD,MAAI,WAAW,QAAW;AACzB,QAAI,WAAW,OAAO;AACtB,QAAI,YAAY,CAAC,OAAO,GAAG;AAE3B,UAAM,YAAY,WAAW,GAAG,QAAQ,IAAI,IAAI,IAAI,MAAM,KAAK;AAC/D,UAAM,aAAa,OAAO,WACvB,GAAG,OAAO,QAAQ,IAAI,OAAO,IAAI,IAAI,OAAO,MAAM,KAClD;AAEH,UAAM,UAAU,yBAAyB,KAAK,OAAO,KAAK,WAAW,UAAU;AAC/E,QAAI,QAAS,aAAY,UAAU,OAAO;AAE1C,WAAO,YAAY,MAAM;AACxB,gBAAU,KAAK,SAAS,GAAG;AAC3B,YAAM,eAAe,SAAS,WAC3B,GAAG,SAAS,QAAQ,IAAI,SAAS,IAAI,IAAI,SAAS,MAAM,KACxD;AAEH,YAAMC,WAAU,2BAA2B,KAAK,WAAW,WAAW,YAAY;AAClF,UAAIA,SAAS,aAAY,UAAUA,QAAO;AAE1C,iBAAW,SAAS;AAAA,IACrB;AAAA,EACD;AAEA,kBAAgB,EAAE,GAAGF,UAAS,GAAGA,UAAS,SAAAC,SAAQ,CAAC;AACpD;AAEO,SAAS,cAAc;AAC7B;AAAA;AAAA,IAA2C,YAAa;AAAA,EAAC;AAC1D;AAKO,SAAS,sBAAsB,UAAU;AAC/C,MACC,OAAO,aAAa;AAAA,EAEpB,EAAE,oBAAoB,WACrB;AACD,IAAE,0BAA0B;AAAA,EAC7B;AACD;;;AClFA,IAAM,+BACL;AASM,SAAS,QAAQ,UAAU,KAAK,gBAAgB,MAAM,cAAc,MAAM;AAChF,WAAS,KAAK,SAAS;AAEvB,MAAI,KAAK;AACR,aAAS,KAAK,IAAI,GAAG,EAAE;AACvB,kBAAc;AACd,aAAS,KAAK,GAAG;AAEjB,QAAI,CAAC,QAAQ,GAAG,GAAG;AAClB,kBAAY;AACZ,UAAI,CAAC,oBAAoB,GAAG,GAAG;AAC9B,iBAAS,KAAK,aAAa;AAAA,MAC5B;AACA,eAAS,KAAK,KAAK,GAAG,GAAG;AAAA,IAC1B;AAAA,EACD;AAEA,WAAS,KAAK,SAAS;AACxB;AAUO,SAAS,OAAO,WAAW,UAAU,CAAC,GAAG;AA7DhD;AA8DC,QAAI,aAAQ,QAAR,mBAAa,SAAQ,QAAQ,IAAI,OAAO;AAC3C,IAAE,YAAY;AAAA,EACf;AACA,SAAO,SAAS;AAAA;AAAA,IAAwC;AAAA,IAAY;AAAA,EAAO;AAC5E;AAQO,SAAS,KAAKE,OAAM,UAAU,IAAI;AACxC,WAAS,KAAK,CAACC,cAAa;AAC3B,IAAAA,UAAS,KAAK,OAAOD,KAAI,KAAK;AAC9B,IAAAC,UAAS,MAAM,EAAE;AACjB,IAAAA,UAAS,KAAK,aAAa;AAAA,EAC5B,CAAC;AACF;AAUO,SAAS,UAAU,UAAU,SAAS,OAAO,WAAW,UAAU,OAAO;AAC/E,QAAM,SAAS,uBAAuB,KAAK;AAE3C,MAAI,SAAS;AACZ,aAAS,KAAK,iDAAiD,MAAM,IAAI;AAAA,EAC1E,OAAO;AACN,aAAS,KAAK,aAAa,MAAM,IAAI;AAAA,EACtC;AAEA,MAAI,SAAS;AACZ,aAAS,KAAK,SAAS;AAAA,EACxB;AAEA,YAAU;AAEV,MAAI,SAAS;AACZ,aAAS,KAAK,8BAA8B;AAAA,EAC7C,OAAO;AACN,aAAS,KAAK,aAAa;AAAA,EAC5B;AACD;AAUO,SAAS,WAAW,OAAO,UAAU,SAAS,QAAQ,QAAQ,GAAG;AACvE,MAAI,QAAQ;AACX,UAAM,QAAQ,SAAS,MAAM,OAAO,MAAM;AAAA,EAC3C;AAEA,MAAI,MAAM,OAAO;AAChB,UAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,EAC/B;AAEA,MAAI,YAAY,SAAS;AACxB,UAAM,QAAQ,SAAS,MAAM,OAAO,UAAU,OAAO;AAAA,EACtD;AAEA,MAAI,WAAW;AACf,MAAI;AAEJ,QAAM,WAAW,QAAQ,2BAA2B;AACpD,QAAM,aAAa,QAAQ,qCAAqC;AAChE,QAAM,YAAY,QAAQ,sBAAsB;AAEhD,OAAK,QAAQ,OAAO;AAEnB,QAAI,OAAO,MAAM,IAAI,MAAM,WAAY;AACvC,QAAI,KAAK,CAAC,MAAM,OAAO,KAAK,CAAC,MAAM,IAAK;AACxC,QAAI,6BAA6B,KAAK,IAAI,EAAG;AAE7C,QAAI,QAAQ,MAAM,IAAI;AAEtB,QAAI,WAAW;AACd,aAAO,KAAK,YAAY;AAAA,IACzB;AAEA,QAAI,UAAU;AACb,UAAI,SAAS,kBAAkB,SAAS,kBAAkB;AACzD,eAAO,SAAS,iBAAiB,UAAU;AAC3C,YAAI,MAAM,IAAI,EAAG;AAAA,MAClB;AAAA,IACD;AAEA,gBAAY,KAAK,MAAM,OAAO,WAAW,qBAAqB,IAAI,CAAC;AAAA,EACpE;AAEA,SAAO;AACR;AAMO,SAAS,aAAa,OAAO;AAEnC,QAAM,eAAe,CAAC;AACtB,MAAI;AAEJ,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,UAAM,MAAM,MAAM,CAAC;AACnB,SAAK,OAAO,KAAK;AAChB,YAAM,OAAO,OAAO,yBAAyB,KAAK,GAAG;AACrD,UAAI,MAAM;AACT,eAAO,eAAe,cAAc,KAAK,IAAI;AAAA,MAC9C,OAAO;AACN,qBAAa,GAAG,IAAI,IAAI,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AACA,SAAO;AACR;AAMO,SAASC,WAAU,OAAO;AAChC,SAAO,OAAO,UAAU,WAAW,QAAQ,SAAS,OAAO,KAAK,QAAQ;AACzE;AAGA,SAAS,uBAAuB,cAAc;AAC7C,SAAO,OAAO,KAAK,YAAY,EAC7B;AAAA;AAAA,IAA+B,CAAC,QAAQ,aAAa,GAAG,KAAK,QAAQ,aAAa,GAAG,MAAM;AAAA,EAAE,EAC7F;AAAA;AAAA,IAA4B,CAAC,QAAQ,GAAG,GAAG,KAAK,YAAY,aAAa,GAAG,GAAG,IAAI,CAAC;AAAA,EAAG,EACvF,KAAK,GAAG;AACX;AAOO,SAAS,WAAW,OAAOF,OAAM,YAAY;AACnD,MAAI,SAAS,SAAS,OAAOA,OAAM,UAAU;AAC7C,SAAO,SAAS,WAAW,YAAY,QAAQ,IAAI,CAAC,MAAM;AAC3D;AAMO,SAAS,WAAW,OAAO,YAAY;AAC7C,MAAI,SAAS,SAAS,OAAO,UAAU;AACvC,SAAO,SAAS,WAAW,YAAY,QAAQ,IAAI,CAAC,MAAM;AAC3D;AASO,SAAS,UAAU,cAAc,YAAY,OAAO;AAtO3D;AAuOC,MAAI,cAAK;AACR,mBAAe,OAAO,WAAW,MAAM,CAAC,CAAC;AAAA,EAC1C;AAIA,MAAI,cAAc,gBAAgB,aAAa,UAAU,EAAE,CAAC,MAAM,OAAO;AACxE,WAAO,aAAa,UAAU,EAAE,CAAC;AAAA,EAClC;AAEA,qBAAa,UAAU,MAAvB,mBAA2B;AAC3B,eAAa,UAAU,IAAI,CAAC,OAAO,MAAM,MAAS;AAClD,QAAM,QAAQ;AAAA,IACb;AAAA;AAAA,IACsB,CAAC,MAAO,aAAa,UAAU,EAAE,CAAC,IAAI;AAAA,EAC7D;AACA,eAAa,UAAU,EAAE,CAAC,IAAI;AAC9B,SAAO,aAAa,UAAU,EAAE,CAAC;AAClC;AASO,SAAS,UAAU,OAAO,OAAO;AACvC,QAAM,IAAI,KAAK;AACf,SAAO;AACR;AAUO,SAAS,aAAa,cAAc,YAAY,OAAO,YAAY;AACzE,YAAU,OAAO,UAAU,cAAc,YAAY,KAAK,CAAC;AAC3D,SAAO;AACR;AASO,SAAS,aAAa,cAAc,YAAY,OAAO,IAAI,GAAG;AACpE,MAAI,cAAc,UAAU,cAAc,YAAY,KAAK;AAC3D,QAAM,IAAI,cAAc,CAAC;AACzB,SAAO;AACR;AASO,SAAS,iBAAiB,cAAc,YAAY,OAAO,IAAI,GAAG;AACxE,QAAM,QAAQ,UAAU,cAAc,YAAY,KAAK,IAAI;AAC3D,QAAM,IAAI,KAAK;AACf,SAAO;AACR;AAGO,SAAS,mBAAmB,cAAc;AAChD,aAAW,cAAc,cAAc;AACtC,iBAAa,UAAU,EAAE,CAAC,EAAE;AAAA,EAC7B;AACD;AAUO,SAAS,KAAK,UAAU,SAAS,MAAM,YAAY,aAAa;AA7TvE;AA8TC,MAAI,WAAU,aAAQ,YAAR,mBAAkB;AAEhC,MAAI,YAAY,MAAM;AACrB,cAAU,QAAQ,SAAS,YAAY,aAAa,IAAI;AAAA,EACzD;AAEA,MAAI,YAAY,QAAW;AAC1B,YAAQ,UAAU,UAAU;AAAA,EAC7B,OAAO;AACN;AAAA,EACD;AACD;AAOO,SAAS,WAAW,OAAO,MAAM;AAEvC,QAAMG,cAAa,CAAC;AACpB,MAAI;AACJ,OAAK,OAAO,OAAO;AAClB,QAAI,CAAC,KAAK,SAAS,GAAG,GAAG;AACxB,MAAAA,YAAW,GAAG,IAAI,MAAM,GAAG;AAAA,IAC5B;AAAA,EACD;AACA,SAAOA;AACR;AAMO,SAAS,eAAe,OAAO;AACrC,QAAM,EAAE,UAAU,SAAS,GAAG,UAAU,IAAI;AAC5C,SAAO;AACR;AAMO,SAAS,eAAe,OAAO;AAErC,QAAM,YAAY,CAAC;AACnB,MAAI,MAAM,SAAU,WAAU,UAAU;AACxC,aAAW,OAAO,MAAM,SAAS;AAChC,cAAU,GAAG,IAAI;AAAA,EAClB;AACA,SAAO;AACR;AAQO,SAAS,WAAW,cAAc,WAAW;AAzXpD;AA0XC,aAAW,OAAO,WAAW;AAC5B,UAAM,gBAAgB,aAAa,GAAG;AACtC,UAAM,QAAQ,UAAU,GAAG;AAC3B,QACC,kBAAkB,UAClB,UAAU,YACV,YAAO,yBAAyB,cAAc,GAAG,MAAjD,mBAAoD,MACnD;AACD,mBAAa,GAAG,IAAI;AAAA,IACrB;AAAA,EACD;AACD;AAUA,SAAS,YAAY,UAAU,SAAS,YAAY,SAAS;AAC5D,MAAI,WAAW,OAAO,GAAG;AACxB,aAAS,KAAK,UAAU;AACxB,YAAQ,KAAK,MAAM,IAAI;AACvB,QAAI,eAAe,MAAM;AACxB,iBAAW;AAAA,IACZ;AAAA,EACD,WAAW,YAAY,MAAM;AAC5B,aAAS,KAAK,eAAe;AAC7B,YAAQ,OAAO;AAAA,EAChB;AACD;AAKO,SAAS,kBAAkB,wBAAwB;AACzD,MAAI,wBAAwB;AAC3B,WAAO,uBAAuB,WAAW,SACtC,yBACA,MAAM,KAAK,sBAAsB;AAAA,EACrC;AACA,SAAO,CAAC;AACT;AAMO,SAAS,KAAK,WAAW;AAC/B,MAAI;AAAA;AAAA,IAA0B;AAAA;AAC9B,SAAO,MAAM;AACZ,QAAI,UAAU,eAAe;AAC5B,cAAQ,UAAU;AAAA,IACnB;AACA,WAAO;AAAA,EACR;AACD;AAOO,SAAS,SAAS,UAAU;AAClC,QAAM,MAAM,SAAS,OAAO,IAAI;AAChC,WAAS,KAAK,UAAU,MAAM,KAAK;AACnC,SAAO;AACR;AA4BO,SAAS,QAAQ,IAAI;AAC3B,QAAM,YAAY,KAAK,EAAE;AAIzB,MAAI;AAEJ,SAAO,SAAU,WAAW;AAC3B,QAAI,UAAU,WAAW,GAAG;AAC3B,aAAO,iBAAiB,UAAU;AAAA,IACnC;AACA,oBAAgB;AAChB,WAAO;AAAA,EACR;AACD;",
  "names": ["str", "value", "stringify", "keys", "head", "context", "body", "result", "_a", "hash", "html", "context", "element", "message", "hash", "renderer", "stringify", "rest_props"]
}
